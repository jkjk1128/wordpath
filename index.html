<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Hop</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">

    <!-- Privacy-friendly analytics by Plausible -->
    <script async src="https://plausible.io/js/pa-mZz4hJAXQBI3yTapyhNQO.js"></script>
    <script>
      window.plausible = window.plausible || function () {
        (plausible.q = plausible.q || []).push(arguments)
      }
      plausible.init = plausible.init || function (i) {
        plausible.o = i || {}
      }
      plausible.init()
    </script>

    <!-- Arial Rounded MT Bold is a system font, no external import needed -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial Rounded MT Bold', Arial, -apple-system, BlinkMacSystemFont, sans-serif;
            font-weight: 700;
            background-color: #FFF7E7;
            color: #000;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .container {
            max-width: 1100px;
            width: 100%;
            margin: 0 auto;
            position: relative;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding-top: 20px;
        }

        h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 10px;
            font-family: 'Arial Rounded MT Bold', Arial, -apple-system, BlinkMacSystemFont, sans-serif;
        }

        .subtitle {
            font-size: 1rem;
            opacity: 0.7;
            font-family: 'Arial Rounded MT Bold', Arial, -apple-system, BlinkMacSystemFont, sans-serif;
        }

        /* Landing Page */
        .landing-page {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #FFF7E7;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .landing-page.hidden {
            display: none;
        }

        .landing-title {
            font-size: 5rem;
            font-weight: 700;
            margin-bottom: 20px;
            font-family: 'Arial Rounded MT Bold', Arial, -apple-system, BlinkMacSystemFont, sans-serif;
        }

        .landing-subtitle {
            font-size: 1.2rem;
            opacity: 0.7;
            margin-bottom: 40px;
            white-space: nowrap;
            font-family: 'Arial Rounded MT Bold', Arial, -apple-system, BlinkMacSystemFont, sans-serif;
        }

        .landing-puzzle-number {
            font-size: 0.95rem;
            color: #999;
            margin-top: 20px;
            font-family: 'Arial Rounded MT Bold', Arial, -apple-system, BlinkMacSystemFont, sans-serif;
        }

        .landing-date {
            font-size: 0.9rem;
            color: #999;
            margin-top: 8px;
            font-family: 'Arial Rounded MT Bold', Arial, -apple-system, BlinkMacSystemFont, sans-serif;
        }

        .play-btn {
            background: #95D5B2;
            color: #ffffff;
            border: none;
            border-radius: 50px;
            padding: 18px 80px;
            font-size: 1.5rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Arial Rounded MT Bold', Arial, -apple-system, BlinkMacSystemFont, sans-serif;
            box-shadow: 0 6px 0 #74C69D;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .play-btn:hover {
            background: #74C69D;
            transform: translateY(-3px);
            box-shadow: 0 9px 0 #52B788;
        }

        .play-btn:active {
            transform: translateY(3px);
            box-shadow: 0 3px 0 #52B788;
        }

        /* Help Button - Minimalist Question Mark */
        .help-button {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: #555;
            font-size: 1.8rem;
            font-weight: 600;
            cursor: pointer;
            padding: 5px;
            line-height: 1;
            transition: opacity 0.2s;
        }

        .help-button:hover {
            opacity: 0.7;
        }

        .help-button:active {
            opacity: 0.5;
        }

        /* Timer Toggle - Next to Help Button */
        .timer-toggle {
            position: absolute;
            top: 20px;
            left: 20px;
            background: none;
            border: none;
            color: #555;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            padding: 5px 10px;
            line-height: 1;
            transition: opacity 0.2s;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        .timer-toggle:hover {
            opacity: 0.7;
        }

        .timer-toggle:active {
            opacity: 0.5;
        }

        /* How to Play Section */
        .how-to-play {
            padding: 30px;
            line-height: 1.8;
        }

        .how-to-play h2 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            font-family: 'Arial Rounded MT Bold', Arial, -apple-system, BlinkMacSystemFont, sans-serif;
        }

        .how-to-play h3 {
            font-size: 1.3rem;
            margin-top: 25px;
            margin-bottom: 15px;
            font-family: 'Arial Rounded MT Bold', Arial, -apple-system, BlinkMacSystemFont, sans-serif;
        }

        .how-to-play p {
            margin-bottom: 15px;
            font-size: 1.05rem;
        }

        .how-to-play ul {
            margin-left: 25px;
            margin-bottom: 15px;
        }

        .how-to-play li {
            margin-bottom: 10px;
            font-size: 1.05rem;
        }

        .how-to-play .emphasis {
            background: #fff;
            border: 2px solid #000;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            font-weight: 600;
            text-align: center;
            font-size: 1.1rem;
        }

        .how-to-play .example {
            background: #fff;
            border: 2px solid #000;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            font-family: monospace;
            text-align: center;
            font-size: 1.1rem;
            letter-spacing: 2px;
        }

        /* Game Area - Properly Centered */
        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            margin: 0 auto;
            position: relative;
        }

        .feedback-area {
            position: absolute;
            right: -30px;
            top: 50%;
            transform: translateY(-50%);
            min-width: 250px;
            max-width: 250px;
            display: flex;
            align-items: center;
            justify-content: flex-start;
        }

        .word-path-container {
            width: 100%;
            max-width: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0;
        }

        .attempts-dots {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .word-path {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            width: 100%;
            margin-bottom: 0;
        }

        .word-box {
            background: #f5f5f5;
            border: 3px solid #000;
            border-radius: 16px;
            padding: 25px 35px;
            width: 100%;
            max-width: 200px;
            text-align: center;
            font-size: 2rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 4px;
            position: relative;
            box-shadow: 0 4px 0 #000;
        }

        .word-input {
            background: #fff;
            border: 3px solid #000;
            border-radius: 16px;
            padding: 25px 35px;
            width: 100%;
            max-width: 200px;
            text-align: center;
            font-size: 2rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 4px;
            font-family: 'Arial Rounded MT Bold', Arial, -apple-system, BlinkMacSystemFont, sans-serif;
            outline: none;
            transition: all 0.2s;
            box-shadow: 0 4px 0 #000;
        }

        .word-input:focus {
            border-color: #000;
            box-shadow: 0 6px 0 #000;
            transform: translateY(-2px);
        }

        /* Red hint letters */
        .word-input.has-hint {
            color: #d32f2f;
        }

        /* Light green for correct words */
        .word-input.correct {
            background-color: #c8e6c9 !important;
            border-color: #81c784 !important;
            box-shadow: 0 4px 0 #66bb6a !important;
        }

        .word-input.correct:focus {
            background-color: #c8e6c9 !important;
            border-color: #81c784 !important;
            box-shadow: 0 6px 0 #66bb6a !important;
        }

        .dot {
            font-size: 1.8rem;
            transition: all 0.3s;
        }

        /* Green dots - 3 attempts remaining */
        .dot.green {
            color: #22c55e;
        }

        /* Yellow dots - 2 attempts remaining */
        .dot.yellow {
            color: #fbbf24;
        }

        /* Red dots - 1 attempt remaining */
        .dot.red {
            color: #ef4444;
        }

        /* Used/faded dots */
        .dot.used {
            opacity: 0.25;
            color: #d1d5db;
        }

        /* Controls */
        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
            justify-content: center;
            margin-top: 30px;
            width: 100%;
        }


        .check-btn {
            background: #000;
            color: #FFF7E7;
            border: none;
            border-radius: 12px;
            padding: 18px 40px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Arial Rounded MT Bold', Arial, -apple-system, BlinkMacSystemFont, sans-serif;
            box-shadow: 0 4px 0 #333;
            text-transform: uppercase;
            letter-spacing: 1px;
            width: auto;
        }

        .check-btn:hover {
            background: #333;
            transform: translateY(-2px);
            box-shadow: 0 6px 0 #333;
        }

        .check-btn:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0 #333;
        }

        .check-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 4px 0 #999;
        }

        .message {
            font-size: 1rem;
            font-weight: 600;
            min-height: 25px;
            text-align: center;
            max-width: 200px;
        }

        .message.error {
            color: #d32f2f;
        }

        .message.success {
            color: #2e7d32;
        }

        .shake {
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-8px); }
            20%, 40%, 60%, 80% { transform: translateX(8px); }
        }

        .highlight-green {
            background-color: #c8e6c9 !important;
            border-color: #81c784 !important;
            box-shadow: 0 4px 0 #66bb6a !important;
            transition: all 0.3s ease;
        }

        /* Modal Screens */
        .game-over-screen,
        .success-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 100;
        }

        .modal {
            background: #FFF7E7;
            border: 4px solid #000;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            max-width: 450px;
            max-height: 85vh;
            overflow-y: auto;
            margin: 20px;
            box-shadow: 0 10px 0 #000;
        }

        .modal h2 {
            font-size: 2.5rem;
            margin-bottom: 25px;
            font-family: 'Arial Rounded MT Bold', Arial, -apple-system, BlinkMacSystemFont, sans-serif;
        }

        .modal p {
            font-size: 1.2rem;
            margin-bottom: 12px;
            line-height: 1.6;
        }

        .solution {
            margin: 25px 0;
            padding: 25px;
            background: #fff;
            border: 3px solid #000;
            border-radius: 12px;
            font-weight: 600;
            letter-spacing: 2px;
            font-size: 1.1rem;
        }

        /* Success popup button container */
        .success-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 25px;
        }

        /* Share button styling */
        .share-btn {
            background: #3B82F6; /* Blue color for Share button */
            box-shadow: 0 6px 0 #1E40AF; /* Darker blue shadow */
        }

        .share-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 0 #1E40AF;
        }

        .share-btn:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0 #1E40AF;
        }

        /* Desktop-only: Smaller share button */
        @media (min-width: 769px) {
            .share-btn {
                padding: 12px 24px;
                font-size: 0.95rem;
            }
        }

        /* Player Statistics Display (Wordle-style) */
        .player-stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 15px 0;
            padding: 15px 10px;
        }

        .stat-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 70px;
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: #000;
            line-height: 1;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 0.75rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 500;
        }

        /* Mobile: Smaller stats */
        @media (max-width: 480px) {
            .player-stats {
                gap: 12px;
                padding: 10px 5px;
                margin: 10px 0;
            }

            .stat-box {
                min-width: 60px;
            }

            .stat-number {
                font-size: 1.3rem;
            }

            .stat-label {
                font-size: 0.65rem;
            }
        }

        /* Tutorial Modal */
        .tutorial-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .tutorial-content {
            background: #FFF7E7;
            border: 4px solid #000;
            border-radius: 20px;
            padding: 30px;
            max-width: 380px;
            max-height: 85vh;
            overflow-y: auto;
            margin: 20px;
            box-shadow: 0 10px 0 #000;
        }

        .tutorial-content h2 {
            font-size: 1.6rem;
            margin-bottom: 15px;
            text-align: center;
            font-family: 'Arial Rounded MT Bold', Arial, -apple-system, BlinkMacSystemFont, sans-serif;
        }

        .tutorial-rules {
            text-align: left;
            margin: 20px 0;
            font-size: 1rem;
            line-height: 1.8;
        }

        .tutorial-rules li {
            margin-bottom: 10px;
        }

        .tutorial-demo {
            background: #fff;
            border: 3px solid #000;
            border-radius: 12px;
            padding: 30px 20px;
            margin: 25px 0;
            text-align: center;
        }

        .demo-words {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
        }

        .demo-word {
            font-size: 1.8rem;
            font-weight: 700;
            letter-spacing: 3px;
        }

        .demo-arrow {
            font-size: 1.5rem;
            opacity: 0.4;
        }

        .demo-input-container {
            margin-top: 20px;
        }

        .demo-input {
            padding: 12px;
            font-size: 1.3rem;
            font-weight: 700;
            text-align: center;
            letter-spacing: 4px;
            text-transform: uppercase;
            border: 3px solid #000;
            border-radius: 8px;
            background: #fff;
            font-family: inherit;
            outline: none;
        }

        .demo-input.typing {
            border-color: #667eea;
            animation: pulse 0.5s;
        }

        .demo-letter-highlight {
            color: #95D5B2;
            animation: highlight 0.5s;
        }

        .demo-box.demo-green {
            background-color: #c8e6c9 !important;
            border-color: #81c784 !important;
            box-shadow: 0 4px 0 #66bb6a !important;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes highlight {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; transform: scale(1.2); }
        }

        .tutorial-close-btn {
            background: #95D5B2;
            color: white;
            border: none;
            border-radius: 50px;
            padding: 15px 40px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 20px;
            width: 100%;
        }

        .tutorial-close-btn:hover {
            background: #74C69D;
        }

        .tutorial-close-btn:active {
            background: #52B788;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding: 15px 30px;
            opacity: 0.6;
            font-size: 0.9rem;
        }

        .countdown {
            text-align: center;
            margin-top: 10px;
            font-size: 0.95rem;
            font-weight: 600;
        }

        .countdown-timer {
            color: #667eea;
            font-weight: 700;
        }

        .footer-links {
            margin-top: 15px;
            font-size: 0.85rem;
        }

        .footer-links a {
            color: #667eea;
            text-decoration: none;
            transition: opacity 0.2s;
            margin: 0 8px;
        }

        .footer-links a:hover {
            opacity: 0.7;
        }

        .footer-links .separator {
            color: #999;
            margin: 0 5px;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }

            .landing-title {
                font-size: 3.5rem;
            }

            .landing-subtitle {
                font-size: 1rem;
            }

            .feedback-area {
                position: static;
                transform: none;
                min-width: auto;
                max-width: 100%;
                width: 100%;
                margin-top: 30px;
                justify-content: center;
                align-items: center;
            }

            .word-path-container {
                max-width: 350px;
            }

            .word-path {
                padding: 0;
            }

            .word-box,
            .word-input {
                padding: 20px 30px;
                font-size: 1.6rem;
                letter-spacing: 3px;
                max-width: 180px;
            }

            .check-btn {
                padding: 16px 40px;
                font-size: 1rem;
            }

            .modal {
                padding: 25px 20px;
            }

            .modal h2 {
                font-size: 2rem;
            }

            .how-to-play {
                padding: 20px;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 2rem;
            }

            .landing-title {
                font-size: 2.5rem;
            }

            .landing-subtitle {
                font-size: 0.75rem;
                padding: 0 10px;
                margin-bottom: 30px;
            }

            .play-btn {
                padding: 15px 60px;
                font-size: 1.2rem;
            }

            .landing-puzzle-number {
                font-size: 0.85rem;
                margin-top: 15px;
            }

            .landing-date {
                font-size: 0.8rem;
                margin-top: 6px;
            }

            .word-path-container {
                max-width: 280px;
            }

            .word-box,
            .word-input {
                padding: 18px 25px;
                font-size: 1.4rem;
                letter-spacing: 2px;
                max-width: 150px;
            }

            .tab {
                padding: 10px 20px;
                font-size: 0.9rem;
            }

            .footer-links {
                display: flex;
                flex-direction: column;
                gap: 8px;
            }

            .footer-links .separator {
                display: none;
            }

            .success-buttons {
                gap: 8px;
                margin-top: 12px;
            }

            .share-btn {
                padding: 11px 35px;
                font-size: 0.95rem;
            }

            /* Success popup mobile optimization */
            .modal {
                padding: 20px 15px;
                margin: 10px;
                max-height: 95vh;
            }

            .modal h2 {
                font-size: 1.8rem;
                margin-bottom: 15px;
            }

            /* Compact word boxes in success popup on mobile */
            .success-screen .solution > div > div > div {
                padding: 8px 12px !important;
                font-size: 1rem !important;
                min-width: 90px !important;
                border-width: 2px !important;
                border-radius: 8px !important;
            }

            /* Reduce gap and margin for word box container */
            .success-screen .solution > div > div {
                gap: 4px !important;
                margin: 10px 0 !important;
            }

            /* Reduce message margin on mobile */
            .success-screen .solution > div:last-child {
                margin-top: 10px !important;
                font-size: 0.85rem !important;
            }

            /* Tutorial/Help popup mobile optimization */
            .tutorial-content {
                padding: 20px 15px;  /* Reduced from 30px */
                max-height: 90vh;    /* Slightly increased to use more screen */
                margin: 10px;        /* Reduced from 20px */
            }

            .tutorial-content h2 {
                font-size: 1.4rem;   /* Reduced from 1.6rem */
                margin-bottom: 10px; /* Reduced from 15px */
            }

            .tutorial-content p {
                font-size: 0.85rem !important;  /* Smaller text */
                line-height: 1.3 !important;
                margin: 10px 0 !important;
            }

            .tutorial-demo {
                padding: 15px 10px;  /* Reduced from 30px 20px */
                margin: 15px 0;      /* Reduced from 25px 0 */
            }

            .demo-box {
                padding: 8px !important;      /* Reduced from 10px */
                font-size: 1.1rem !important; /* Reduced from 1.2rem */
            }

            .demo-input {
                padding: 8px !important;      /* Reduced from 12px */
                font-size: 1.1rem !important; /* Reduced from 1.3rem */
            }

            .tutorial-close-btn {
                margin-top: 15px;    /* Reduced from 20px */
                padding: 12px 30px;  /* Reduced from 15px 40px */
                font-size: 1rem;     /* Reduced from 1.1rem */
            }
        }

        /* Ultra-compact mobile layout - fits in 100vh on iPhone */
        @media (max-width: 430px) {
            /* Viewport constraint - prevent scrolling */
            body {
                height: 100vh; /* Fallback for older browsers */
                height: 100svh; /* Small viewport height for mobile */
                min-height: unset; /* Override default min-height */
                overflow: hidden; /* Critical: prevent scrolling */
                padding: 10px 20px; /* Reduce from 20px */
            }

            /* Flexbox distribution */
            .container {
                height: 100%;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
            }

            /* Header - reduce size and spacing */
            header {
                margin-bottom: 0;
                padding-top: 0;
            }

            h1 {
                font-size: 1.7rem; /* Increased from 1.5rem for better prominence */
                margin-bottom: 6px; /* Increased from 5px */
            }

            /* Attempts dots */
            .attempts-dots {
                gap: 8px; /* Down from 12px */
                margin-bottom: 10px; /* Down from 20px */
            }

            .dot {
                font-size: 1.3rem; /* Down from 1.8rem */
            }

            /* Word boxes - critical space saver */
            .word-path-container {
                max-width: 240px; /* Down from 280px */
            }

            .word-path {
                gap: 10px; /* Increased from 8px for better spacing */
                margin-bottom: 0;
            }

            .word-box,
            .word-input {
                padding: 12px 20px; /* Down from 18px 25px - saves 60px total */
                font-size: 1.2rem; /* Down from 1.4rem */
                letter-spacing: 1.5px;
                max-width: 130px; /* Down from 150px */
                border-width: 2px; /* Down from 3px */
                box-shadow: 0 3px 0 #000; /* Down from 0 4px 0 */
            }

            /* Word input states */
            .word-input:focus {
                box-shadow: 0 5px 0 #000;
            }

            .word-input.correct,
            .word-input.correct:focus {
                box-shadow: 0 3px 0 #66bb6a !important;
            }

            /* Controls - button */
            .controls {
                margin-top: 10px; /* Down from 30px - saves 20px */
                gap: 10px;
            }

            .check-btn {
                padding: 12px 20px; /* Match word box horizontal padding */
                font-size: 0.9rem; /* Down from 1rem */
                box-shadow: 0 3px 0 #333;
                width: 130px; /* Match word box max-width */
                max-width: 130px;
            }

            .check-btn:hover {
                box-shadow: 0 5px 0 #333;
            }

            .check-btn:active {
                box-shadow: 0 2px 0 #333;
            }

            .check-btn:disabled {
                box-shadow: 0 3px 0 #999;
            }

            /* Footer - significant space saver */
            footer {
                margin-top: 15px; /* Increased from 10px to add spacing */
                padding: 10px 20px; /* Increased from 8px to 10px */
                font-size: 0.75rem;
            }

            .countdown {
                margin-top: 6px; /* Increased from 5px */
                font-size: 0.8rem;
            }

            .footer-links {
                display: flex;
                flex-direction: row; /* Override column from 480px breakpoint */
                justify-content: center;
                flex-wrap: wrap; /* Allow wrapping if needed */
                margin-top: 8px;
                font-size: 0.7rem;
                gap: 3px 8px; /* Vertical gap 3px, horizontal gap 8px */
            }

            .footer-links .separator {
                display: inline; /* Override none from 480px breakpoint */
                margin: 0 4px; /* Small spacing around separators */
            }

            /* Timer toggle */
            .timer-toggle {
                font-size: 0.8rem;
                top: 15px;
                left: 15px;
            }

            /* Help button */
            .help-button {
                font-size: 1.5rem;
                top: 15px;
                right: 15px;
            }
        }
    </style>

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID');
    </script>
</head>
<body>
    <!-- Landing Page -->
    <div class="landing-page" id="landing-page">
        <h1 class="landing-title">Word Hop</h1>
        <p class="landing-subtitle">Hop from word to word by changing one letter at a time</p>
        <button class="play-btn" id="play-btn-landing">Play</button>
        <p class="landing-puzzle-number" id="landing-puzzle-number">Daily Puzzle #1</p>
        <p class="landing-date" id="landing-date">Saturday, December 21, 2025</p>
    </div>

    <!-- Tutorial Modal -->
    <div class="tutorial-modal" id="tutorial-modal">
        <div class="tutorial-content">
            <h2>How to Play</h2>

            <p style="font-size: 0.95rem; line-height: 1.4; margin: 15px 0 10px 0; text-align: center;">
                Connect the first word to the last word by&nbsp;changing<br><strong>one letter at a time</strong>.
            </p>

            <div class="tutorial-demo">
                <div style="display: flex; flex-direction: column; gap: 8px; margin: 15px auto; max-width: 200px;">
                    <div id="demo-start-box" class="demo-box" style="padding: 10px; background: #e8e8e8; border: 2px solid #999; border-radius: 8px; font-size: 1.2rem; font-weight: 700; letter-spacing: 2px; text-align: center; transition: all 0.3s ease;">
                        COLD
                    </div>

                    <div style="position: relative;">
                        <input type="text" class="demo-input demo-box" id="demo-input-1" maxlength="4" readonly value="" style="width: 100%; margin: 0; padding: 10px; font-size: 1.2rem; transition: all 0.3s ease;">
                        <div id="demo-highlight-1" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 1.2rem; font-weight: 700; letter-spacing: 4px; pointer-events: none; display: none;"></div>
                    </div>

                    <div style="position: relative;">
                        <input type="text" class="demo-input demo-box" id="demo-input-2" maxlength="4" readonly value="" style="width: 100%; margin: 0; padding: 10px; font-size: 1.2rem; transition: all 0.3s ease;">
                        <div id="demo-highlight-2" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 1.2rem; font-weight: 700; letter-spacing: 4px; pointer-events: none; display: none;"></div>
                    </div>

                    <div style="position: relative;">
                        <input type="text" class="demo-input demo-box" id="demo-input-3" maxlength="4" readonly value="" style="width: 100%; margin: 0; padding: 10px; font-size: 1.2rem; transition: all 0.3s ease;">
                        <div id="demo-highlight-3" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 1.2rem; font-weight: 700; letter-spacing: 4px; pointer-events: none; display: none;"></div>
                    </div>

                    <div id="demo-end-box" class="demo-box" style="padding: 10px; background: #e8e8e8; border: 2px solid #999; border-radius: 8px; font-size: 1.2rem; font-weight: 700; letter-spacing: 2px; text-align: center; position: relative; transition: all 0.3s ease;">
                        <span id="demo-end-word">WARM</span>
                        <span id="demo-highlight-end" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 1.2rem; font-weight: 700; letter-spacing: 2px; pointer-events: none; display: none;"></span>
                    </div>
                </div>
            </div>

            <button class="tutorial-close-btn" id="tutorial-close-btn">Got it!</button>
        </div>
    </div>

    <div class="container">
        <button class="timer-toggle" id="timer-toggle">Show Timer</button>
        <button class="help-button" id="help-btn" title="How to Play">?</button>

        <header>
            <h1>Word Hop</h1>
        </header>

        <div class="game-container">
            <div class="word-path-container">
                <!-- Three dots: directly above first word box -->
                <div class="attempts-dots" id="attempts-display">
                    <span class="dot" id="dot1">●</span>
                    <span class="dot" id="dot2">●</span>
                    <span class="dot" id="dot3">●</span>
                </div>

                <!-- Word boxes: all centered -->
                <div class="word-path" id="word-path">
                    <div class="word-box" id="start-word">COLD</div>
                    <input type="text" class="word-input" id="word1" maxlength="4" placeholder="____">
                    <input type="text" class="word-input" id="word2" maxlength="4" placeholder="____">
                    <input type="text" class="word-input" id="word3" maxlength="4" placeholder="____">
                    <div class="word-box" id="end-word">WARM</div>
                </div>

                <!-- Check Path button: centered below word boxes -->
                <div class="controls">
                    <button class="check-btn" id="check-btn">Check Path</button>
                    <button class="check-btn" id="see-results-btn" style="display: none;">See Results</button>
                </div>
            </div>

            <!-- Feedback: positioned to the right, doesn't affect centering -->
            <div class="feedback-area">
                <div class="message" id="message"></div>
            </div>
        </div>

        <!-- Hidden How to Play Tab (kept for compatibility) -->
        <div id="how-to-play-tab" style="display: none;">
            <div class="how-to-play">
                <h2>How to Play</h2>

                <h3>Objective</h3>
                <p>Connect the START word to the END word by filling in three intermediate words, creating a valid 4-step word ladder.</p>

                <div class="example">
                    START<br>
                    ↓<br>
                    WORD 1<br>
                    ↓<br>
                    WORD 2<br>
                    ↓<br>
                    WORD 3<br>
                    ↓<br>
                    END
                </div>

                <h3>The Golden Rule</h3>
                <div class="emphasis">
                    Each hop must change EXACTLY ONE LETTER from the previous word.
                </div>

                <p>For example, if you have the word <strong>COLD</strong>, you could hop to:</p>
                <ul>
                    <li><strong>CORD</strong> (changed L to R) ✓</li>
                    <li><strong>BOLD</strong> (changed C to B) ✓</li>
                    <li><strong>COLA</strong> (changed D to A) ✓</li>
                </ul>

                <p>But you CANNOT hop to:</p>
                <ul>
                    <li><strong>WARM</strong> (changed 3 letters) ✗</li>
                    <li><strong>COAL</strong> (changed 2 letters) ✗</li>
                    <li><strong>XOLD</strong> (not a real word) ✗</li>
                </ul>

                <h3>Game Rules</h3>
                <ul>
                    <li>Fill in all three empty word slots</li>
                    <li>Each word must be exactly 4 letters</li>
                    <li>Each word must be a valid English word</li>
                    <li>Each hop changes exactly ONE letter</li>
                    <li>You have 3 attempts (shown as dots)</li>
                    <li>A new puzzle appears daily at 12:00 AM ET</li>
                </ul>

                <h3>Example Solution</h3>
                <p>From <strong>COLD</strong> to <strong>WARM</strong>:</p>
                <div class="example">
                    COLD → CORD → WORD → WORM → WARM
                </div>
                <p style="text-align: center; margin-top: 10px;">Each step changes exactly one letter!</p>
            </div>
        </div>

        <footer>
            <div id="footer-puzzle-number">Daily Puzzle #1</div>
            <div class="countdown">
                Next puzzle in <span class="countdown-timer" id="countdown-timer">--:--:--</span>
            </div>
            <div class="footer-links">
                <a href="about.html">About</a><span class="separator">|</span>
                <a href="contact.html">Contact</a><span class="separator">|</span>
                <a href="privacy.html">Privacy</a><span class="separator">|</span>
                <a href="terms.html">Terms</a>
            </div>
        </footer>
    </div>

    <!-- Game Over Screen -->
    <div class="game-over-screen" id="game-over-screen">
        <div class="modal">
            <h2>Game Over</h2>
            <p>You've used all 3 attempts.</p>
            <p>Valid solution(s):</p>
            <div class="solution" id="solution-path"></div>
            <p>Come back tomorrow for a new puzzle!</p>
            <button class="play-btn" id="return-from-gameover-btn" style="margin-top: 25px; padding: 15px 40px; font-size: 1rem;">Return to Game</button>
        </div>
    </div>

    <!-- Success Screen -->
    <div class="success-screen" id="success-screen">
        <div class="modal">
            <h2 id="success-title">Excellent!</h2>
            <p id="success-subtitle">You solved today's puzzle!</p>
            <div class="solution" id="success-path"></div>

            <!-- Button container for better layout -->
            <div class="success-buttons">
                <button class="play-btn share-btn" id="share-btn">Share Results</button>
                <button class="play-btn" id="return-from-success-btn" style="display: none;">Return to Game</button>
            </div>
        </div>
    </div>

    <script>
        /**
         * WORD HOP - PUZZLE VALIDATION SYSTEM
         *
         * CRITICAL REQUIREMENT: Every puzzle MUST be solvable
         *
         * To test a new puzzle in the browser console:
         *   validatePuzzle('tank', 'sell')
         *
         * This will show:
         *   - Whether a path exists
         *   - Number of valid solutions
         *   - Sample solution paths
         *   - Validation result (accept/reject)
         *
         * ❌ UNSOLVABLE PUZZLES WILL PREVENT THE GAME FROM LOADING ❌
         */

        // Comprehensive 4-letter English word dictionary
        // Based on standard English dictionaries and word frequency lists
        // Includes ~2000+ valid 4-letter words to ensure all valid paths work
        const VALID_WORDS = new Set([
            // A
            'able', 'ably', 'abut', 'ache', 'achy', 'acid', 'acne', 'acre', 'aged', 'ages', 'aids', 'ails', 'aims', 'airs', 'airy', 'ajar', 'akin', 'alas', 'ales', 'also', 'alto', 'amen', 'amid', 'amok', 'amps', 'ants', 'anus', 'apes', 'apex', 'apps', 'aqua', 'arch', 'arcs', 'area', 'aria', 'arid', 'arms', 'army', 'arts', 'arty', 'ashy', 'asks', 'atom', 'atop', 'aunt', 'aura', 'auto', 'avid', 'avow', 'away', 'awed', 'awes', 'awls', 'awns', 'awry', 'axed', 'axes', 'axis', 'axle', 'axon', 'ayes',
            // B
            'babe', 'baby', 'back', 'bade', 'bags', 'bail', 'bait', 'bake', 'bald', 'bale', 'balk', 'ball', 'balm', 'band', 'bane', 'bang', 'bank', 'bans', 'bare', 'barf', 'bark', 'barn', 'bars', 'base', 'bash', 'bask', 'bass', 'bath', 'bats', 'bawl', 'bays', 'bead', 'beak', 'beam', 'bean', 'bear', 'beat', 'beau', 'beck', 'beds', 'beef', 'been', 'beep', 'beer', 'bees', 'beet', 'begs', 'bell', 'belt', 'bend', 'bent', 'berg', 'berm', 'best', 'beta', 'bets', 'bias', 'bibs', 'bide', 'bids', 'bike', 'bile', 'bilk', 'bill', 'bind', 'bins', 'bird', 'bite', 'bits', 'blab', 'blah', 'bled', 'blew', 'blob', 'bloc', 'blog', 'blot', 'blow', 'blue', 'blur', 'boar', 'boas', 'boat', 'bobs', 'bode', 'body', 'bogs', 'boil', 'bold', 'bole', 'bolt', 'bomb', 'bond', 'bone', 'bonk', 'bony', 'boob', 'book', 'boom', 'boon', 'boor', 'boos', 'boot', 'bore', 'born', 'boss', 'both', 'bout', 'bowl', 'bows', 'boys', 'brad', 'brag', 'bran', 'bras', 'brat', 'bray', 'bred', 'brew', 'brig', 'brim', 'bris', 'broc', 'brow', 'brut', 'buck', 'buds', 'buff', 'bugs', 'bulb', 'bulk', 'bull', 'bump', 'bums', 'bunk', 'buns', 'buoy', 'burg', 'burn', 'burp', 'burr', 'bury', 'bush', 'busk', 'buss', 'bust', 'busy', 'butt', 'buys', 'buzz', 'byes',
            // C
            'cabs', 'cafe', 'cage', 'cake', 'calf', 'call', 'calm', 'came', 'camp', 'cams', 'cane', 'cans', 'cant', 'cape', 'caps', 'card', 'care', 'carp', 'cars', 'cart', 'case', 'cash', 'cask', 'cast', 'cats', 'cave', 'caws', 'cede', 'cell', 'cent', 'chap', 'char', 'chat', 'chaw', 'chef', 'chew', 'chic', 'chin', 'chip', 'chit', 'chop', 'chow', 'chug', 'chum', 'cite', 'city', 'clad', 'clam', 'clan', 'clap', 'claw', 'clay', 'clef', 'clip', 'clod', 'clog', 'clop', 'clot', 'cloy', 'club', 'clue', 'coal', 'coat', 'coax', 'cobs', 'cock', 'coda', 'code', 'cods', 'coed', 'cogs', 'coil', 'coin', 'coke', 'cold', 'cole', 'colt', 'coma', 'comb', 'come', 'cone', 'conk', 'cons', 'cony', 'cook', 'cool', 'coop', 'coot', 'cope', 'cops', 'copy', 'cord', 'core', 'cork', 'corn', 'cost', 'cosy', 'cote', 'cots', 'coup', 'cove', 'cows', 'cozy', 'crab', 'cram', 'crap', 'craw', 'crew', 'crib', 'crop', 'crow', 'crud', 'cube', 'cubs', 'cud', 'cued', 'cues', 'cuff', 'cull', 'cult', 'cums', 'cups', 'curb', 'curd', 'cure', 'curl', 'curt', 'cusp', 'cuss', 'cute', 'cuts', 'cyan', 'cyst', 'czar',
            // D
            'dabs', 'dads', 'daft', 'dale', 'dame', 'damn', 'damp', 'dams', 'dank', 'dare', 'dark', 'darn', 'dart', 'dash', 'data', 'date', 'daub', 'dawn', 'days', 'daze', 'dead', 'deaf', 'deal', 'dean', 'dear', 'debt', 'deck', 'deed', 'deem', 'deep', 'deer', 'defy', 'deli', 'dell', 'demo', 'dens', 'dent', 'deny', 'desk', 'deth', 'dew', 'dews', 'dewy', 'dial', 'dice', 'dick', 'died', 'dies', 'diet', 'digs', 'dike', 'dill', 'dime', 'dims', 'dine', 'ding', 'dink', 'dino', 'dins', 'dint', 'dips', 'dire', 'dirt', 'disc', 'dish', 'disk', 'diva', 'dive', 'dock', 'docs', 'dodo', 'doer', 'does', 'doff', 'doge', 'dogs', 'dojo', 'dole', 'doll', 'dolt', 'dome', 'done', 'doom', 'door', 'dope', 'dork', 'dorm', 'dory', 'dose', 'dote', 'doth', 'dots', 'dour', 'dove', 'down', 'doze', 'dozy', 'drab', 'drag', 'dram', 'drat', 'draw', 'dray', 'drew', 'drip', 'drop', 'drug', 'drum', 'drys', 'dual', 'dubs', 'duck', 'duct', 'dude', 'duds', 'duel', 'dues', 'duet', 'duff', 'duke', 'dull', 'duly', 'dumb', 'dump', 'dune', 'dung', 'dunk', 'duos', 'dupe', 'dusk', 'dust', 'duty', 'dyed', 'dyer', 'dyes', 'dyke',
            // E
            'each', 'earl', 'earn', 'ears', 'ease', 'east', 'easy', 'eats', 'eave', 'ebbs', 'echo', 'edge', 'edgy', 'edit', 'eels', 'eggs', 'egos', 'eked', 'ekes', 'elan', 'elks', 'elms', 'else', 'emir', 'emit', 'emus', 'ends', 'epic', 'eras', 'ergo', 'ergs', 'errs', 'euro', 'even', 'ever', 'eves', 'evil', 'ewer', 'ewes', 'exam', 'exec', 'exes', 'exit', 'expo', 'eyed', 'eyes',
            // F
            'face', 'fact', 'fade', 'fads', 'fail', 'fain', 'fair', 'fake', 'fall', 'fame', 'fang', 'fans', 'fare', 'farm', 'fart', 'fast', 'fate', 'fats', 'faun', 'faux', 'fave', 'fawn', 'faze', 'fear', 'feat', 'feed', 'feel', 'fees', 'feet', 'fell', 'felt', 'fend', 'fern', 'fess', 'fest', 'feta', 'feud', 'fews', 'fiat', 'fibs', 'fief', 'fife', 'figs', 'file', 'fill', 'film', 'fils', 'find', 'fine', 'fink', 'fins', 'fire', 'firm', 'firs', 'fish', 'fist', 'fits', 'five', 'fizz', 'flab', 'flag', 'flak', 'flam', 'flan', 'flap', 'flat', 'flaw', 'flax', 'flay', 'flea', 'fled', 'flee', 'flew', 'flex', 'flip', 'flit', 'floc', 'flog', 'flop', 'flow', 'flub', 'flue', 'flux', 'foal', 'foam', 'fobs', 'foci', 'foes', 'fogs', 'fogy', 'foil', 'fold', 'folk', 'fond', 'font', 'food', 'fool', 'foot', 'fops', 'fora', 'ford', 'fore', 'fork', 'form', 'fort', 'foul', 'four', 'fowl', 'foxy', 'frag', 'frat', 'fray', 'free', 'fret', 'frog', 'from', 'fros', 'fuel', 'full', 'fume', 'fund', 'funk', 'funs', 'furl', 'furs', 'fury', 'fuse', 'fuss', 'fuzz',
            // G
            'gabs', 'gaga', 'gage', 'gags', 'gain', 'gait', 'gala', 'gale', 'gall', 'gals', 'game', 'gams', 'gang', 'gape', 'gaps', 'garb', 'gash', 'gasp', 'gate', 'gave', 'gawk', 'gays', 'gaze', 'gear', 'geek', 'gees', 'gels', 'gems', 'gene', 'gent', 'germ', 'gets', 'gibe', 'gift', 'gigs', 'gild', 'gill', 'gilt', 'gimp', 'gins', 'gird', 'girl', 'girt', 'gist', 'give', 'glad', 'glam', 'glee', 'glen', 'glib', 'glim', 'glob', 'glom', 'glop', 'glow', 'glue', 'glug', 'glum', 'glut', 'gnat', 'gnaw', 'gnus', 'goad', 'goal', 'goat', 'gobs', 'gods', 'goer', 'goes', 'gold', 'golf', 'gone', 'gong', 'good', 'goof', 'goon', 'goop', 'gore', 'gory', 'gosh', 'goth', 'gout', 'gown', 'grab', 'grad', 'gram', 'gran', 'gray', 'grew', 'grey', 'grid', 'grim', 'grin', 'grip', 'grit', 'grog', 'grow', 'grub', 'gruff', 'gulf', 'gull', 'gulp', 'gums', 'gunk', 'guns', 'guru', 'gush', 'gust', 'guts', 'guys', 'gyms', 'gyre', 'gyro',
            // H
            'hack', 'hags', 'hail', 'hair', 'hake', 'hale', 'half', 'hall', 'halo', 'halt', 'hams', 'hand', 'hang', 'hank', 'hard', 'hare', 'hark', 'harm', 'harp', 'hart', 'hash', 'hasp', 'hast', 'hate', 'hats', 'haul', 'have', 'hawk', 'haws', 'hays', 'haze', 'hazy', 'head', 'heal', 'heap', 'hear', 'heat', 'heck', 'heed', 'heel', 'heft', 'heir', 'held', 'hell', 'helm', 'help', 'hemp', 'hems', 'hens', 'herb', 'herd', 'here', 'hero', 'hers', 'hewn', 'hews', 'hick', 'hide', 'high', 'hike', 'hill', 'hilt', 'hims', 'hind', 'hint', 'hips', 'hire', 'hiss', 'hits', 'hive', 'hoax', 'hobo', 'hobs', 'hock', 'hoed', 'hoer', 'hoes', 'hogs', 'hold', 'hole', 'holy', 'home', 'hone', 'honk', 'hood', 'hoof', 'hook', 'hoop', 'hoot', 'hope', 'hops', 'horn', 'hose', 'host', 'hots', 'hour', 'hove', 'howl', 'hows', 'hubs', 'hued', 'hues', 'huge', 'hugs', 'hula', 'hulk', 'hull', 'huls', 'hums', 'hung', 'hunk', 'hunt', 'hurl', 'hurt', 'hush', 'husk', 'huts', 'hymn', 'hype', 'hypo',
            // I - J - K
            'ibex', 'ibis', 'iced', 'ices', 'icky', 'icon', 'idea', 'idem', 'ides', 'idle', 'idol', 'iffy', 'iamb', 'inch', 'info', 'inks', 'inky', 'inns', 'into', 'ions', 'iota', 'iris', 'iron', 'isle', 'itch', 'item', 'jabs', 'jack', 'jade', 'jags', 'jail', 'jams', 'jane', 'jape', 'jars', 'java', 'jaws', 'jays', 'jazz', 'jean', 'jeep', 'jeer', 'jeez', 'jell', 'jerk', 'jest', 'jets', 'jibe', 'jibs', 'jigs', 'jilt', 'jive', 'jobs', 'jock', 'jogs', 'john', 'join', 'joke', 'jolt', 'jots', 'jowl', 'joys', 'judo', 'jugs', 'jump', 'june', 'junk', 'jury', 'just', 'jute', 'juts', 'kale', 'kart', 'keel', 'keen', 'keep', 'kegs', 'kelp', 'keno', 'kent', 'kept', 'kern', 'keys', 'khan', 'kick', 'kids', 'kill', 'kiln', 'kilo', 'kilt', 'kind', 'king', 'kink', 'kiss', 'kite', 'kits', 'kiwi', 'knee', 'knew', 'knit', 'knob', 'knot', 'know', 'koan', 'kohl',
            // L
            'labs', 'lace', 'lack', 'lacy', 'lads', 'lady', 'lags', 'laid', 'lain', 'lair', 'lake', 'lamb', 'lame', 'lamp', 'lams', 'land', 'lane', 'lank', 'laps', 'lard', 'lark', 'lash', 'lass', 'last', 'late', 'lath', 'laud', 'lava', 'lawn', 'laws', 'lays', 'laze', 'lazy', 'lead', 'leaf', 'leak', 'lean', 'leap', 'leas', 'lech', 'leer', 'lees', 'left', 'legs', 'lend', 'lens', 'lent', 'less', 'lest', 'lets', 'levy', 'lewd', 'liar', 'lice', 'lick', 'lids', 'lied', 'lien', 'lier', 'lies', 'lieu', 'life', 'lift', 'like', 'lilt', 'lily', 'limb', 'lime', 'limp', 'line', 'link', 'lint', 'lion', 'lips', 'lisp', 'list', 'lite', 'live', 'load', 'loaf', 'loam', 'loan', 'lobe', 'lobs', 'loci', 'lock', 'loco', 'lode', 'loft', 'loge', 'logo', 'logs', 'loin', 'lone', 'long', 'look', 'loom', 'loon', 'loop', 'loot', 'lope', 'lops', 'lord', 'lore', 'lose', 'loss', 'lost', 'lots', 'loud', 'lour', 'lout', 'love', 'lows', 'lube', 'luck', 'luge', 'lugs', 'lull', 'lulu', 'lump', 'lums', 'lung', 'lunk', 'lure', 'lurk', 'lush', 'lust', 'lute', 'luvs', 'lynx',
            // M
            'mace', 'mach', 'made', 'mage', 'magi', 'mags', 'maid', 'mail', 'maim', 'main', 'make', 'male', 'mall', 'malt', 'mama', 'mams', 'mane', 'mans', 'many', 'maps', 'mare', 'mark', 'mars', 'mart', 'mash', 'mask', 'mass', 'mast', 'mate', 'math', 'mats', 'matt', 'maul', 'maws', 'maxi', 'mayo', 'maze', 'mead', 'meal', 'mean', 'meat', 'meek', 'meet', 'mega', 'meld', 'melt', 'meme', 'memo', 'mend', 'menu', 'meow', 'mere', 'mesa', 'mesh', 'mess', 'meta', 'mete', 'meth', 'mews', 'mica', 'mice', 'mid', 'midi', 'mien', 'miff', 'mike', 'mild', 'mile', 'milk', 'mill', 'mils', 'milt', 'mime', 'mind', 'mine', 'mini', 'mink', 'mint', 'minx', 'mire', 'miry', 'miss', 'mist', 'mite', 'mitt', 'moan', 'moat', 'mobs', 'mock', 'mode', 'mods', 'mojo', 'mold', 'mole', 'moll', 'molt', 'moms', 'monk', 'mono', 'mood', 'moon', 'moor', 'moos', 'moot', 'mope', 'mops', 'more', 'morn', 'moss', 'most', 'mote', 'moth', 'move', 'mown', 'mows', 'much', 'muck', 'muds', 'muff', 'mugs', 'mule', 'mull', 'mums', 'mung', 'munk', 'muon', 'mure', 'murk', 'muse', 'mush', 'musk', 'muss', 'must', 'mute', 'mutt', 'myth',
            // N - O
            'nabs', 'nags', 'nail', 'name', 'nana', 'nape', 'naps', 'narc', 'nary', 'navy', 'nays', 'nazi', 'neap', 'near', 'neat', 'neck', 'need', 'neon', 'nerd', 'ness', 'nest', 'nets', 'news', 'newt', 'next', 'nibs', 'nice', 'nick', 'nigh', 'nine', 'nips', 'nits', 'node', 'nods', 'noel', 'noes', 'none', 'nook', 'noon', 'nope', 'norm', 'nose', 'nosy', 'note', 'noun', 'nova', 'nows', 'nubs', 'nude', 'nuke', 'null', 'numb', 'nuns', 'nuts', 'oafs', 'oaks', 'oars', 'oath', 'oats', 'obey', 'oboe', 'odds', 'odes', 'odor', 'offs', 'ogre', 'ohed', 'ohms', 'oils', 'oily', 'oink', 'okay', 'okra', 'omen', 'omit', 'once', 'ones', 'only', 'onto', 'onus', 'ooze', 'oozy', 'opal', 'open', 'opts', 'opus', 'oral', 'orbs', 'orca', 'ores', 'orgy', 'otic', 'otto', 'ouch', 'ours', 'oust', 'outs', 'ouzo', 'oval', 'oven', 'over', 'owed', 'owes', 'owls', 'owns', 'oxen', 'oxes',
            // P
            'pace', 'pack', 'pact', 'pads', 'page', 'paid', 'pail', 'pain', 'pair', 'pale', 'pall', 'palm', 'pals', 'pane', 'pang', 'pans', 'pant', 'papa', 'paps', 'para', 'pard', 'pare', 'park', 'parr', 'part', 'pass', 'past', 'pate', 'path', 'pats', 'paul', 'pave', 'paws', 'pays', 'peak', 'peal', 'pear', 'peas', 'peat', 'peck', 'peds', 'peek', 'peel', 'peep', 'peer', 'pees', 'pegs', 'pelf', 'pelt', 'pend', 'pens', 'pent', 'peon', 'peps', 'perm', 'perk', 'pert', 'peso', 'pest', 'pets', 'pews', 'phew', 'phis', 'pica', 'pick', 'pied', 'pier', 'pies', 'pigs', 'pike', 'pile', 'pill', 'pimp', 'pine', 'ping', 'pink', 'pins', 'pint', 'piny', 'pion', 'pipe', 'pips', 'pish', 'piss', 'pita', 'pith', 'pits', 'pity', 'pity', 'plan', 'play', 'plea', 'pled', 'plod', 'plop', 'plot', 'plow', 'ploy', 'plug', 'plum', 'plus', 'pock', 'pods', 'poem', 'poet', 'pogo', 'poke', 'poky', 'pole', 'poll', 'polo', 'pols', 'pomp', 'pond', 'pone', 'pony', 'poof', 'pooh', 'pool', 'poop', 'poor', 'pope', 'pops', 'pore', 'pork', 'porn', 'port', 'pose', 'posh', 'post', 'posy', 'pots', 'pour', 'pout', 'pram', 'pray', 'prep', 'prey', 'prez', 'prig', 'prim', 'prod', 'prof', 'prom', 'prop', 'pros', 'prow', 'prude', 'prune', 'pubs', 'puck', 'puff', 'pugs', 'puke', 'pull', 'pulp', 'puls', 'puma', 'pump', 'puns', 'punk', 'punt', 'puny', 'pupa', 'pups', 'pure', 'purl', 'purr', 'push', 'puss', 'puts', 'putt', 'putz',
            // Q - R
            'quad', 'quag', 'quay', 'quell', 'quid', 'quim', 'quip', 'quit', 'quiz', 'race', 'rack', 'racy', 'raft', 'rage', 'rags', 'raid', 'rail', 'rain', 'rake', 'ramp', 'rams', 'rand', 'rang', 'rank', 'rant', 'raps', 'rapt', 'rare', 'rash', 'rasp', 'rate', 'rats', 'rave', 'raws', 'rays', 'raze', 'razz', 'read', 'real', 'ream', 'reap', 'rear', 'redo', 'reds', 'reed', 'reef', 'reek', 'reel', 'refs', 'rein', 'rely', 'rems', 'rend', 'rent', 'repo', 'reps', 'rest', 'revs', 'ribs', 'rice', 'rich', 'rick', 'ride', 'rids', 'rife', 'riff', 'rift', 'rigs', 'rile', 'rill', 'rime', 'rims', 'rind', 'ring', 'rink', 'rins', 'riot', 'ripe', 'rips', 'rise', 'risk', 'rite', 'ritz', 'road', 'roam', 'roan', 'roar', 'robe', 'robs', 'rock', 'rode', 'rods', 'roes', 'role', 'roll', 'romp', 'rood', 'roof', 'rook', 'room', 'root', 'rope', 'ropy', 'rose', 'rosy', 'rote', 'rots', 'roue', 'roup', 'rout', 'rove', 'rows', 'rube', 'rubs', 'ruby', 'ruck', 'rude', 'rued', 'rues', 'ruff', 'rugs', 'ruin', 'rule', 'rump', 'rums', 'rune', 'rung', 'runs', 'runt', 'ruse', 'rush', 'rust', 'ruth', 'ruts', 'ryes',
            // S
            'sack', 'sacs', 'safe', 'saga', 'sage', 'sags', 'said', 'sail', 'sake', 'sale', 'salt', 'same', 'sand', 'sane', 'sang', 'sank', 'sans', 'saps', 'sari', 'sash', 'sass', 'sate', 'save', 'saws', 'says', 'scab', 'scad', 'scam', 'scan', 'scar', 'scat', 'scop', 'scot', 'scow', 'scud', 'scum', 'seal', 'seam', 'sear', 'seas', 'seat', 'secs', 'sect', 'seed', 'seek', 'seem', 'seen', 'seep', 'seer', 'sees', 'self', 'sell', 'semi', 'send', 'sens', 'sent', 'sept', 'serf', 'sets', 'sewn', 'sews', 'sexy', 'shad', 'shag', 'shah', 'sham', 'shat', 'shaw', 'shed', 'shim', 'shin', 'ship', 'shiv', 'shmo', 'shod', 'shoe', 'shoo', 'shop', 'shot', 'show', 'shun', 'shut', 'shwa', 'sick', 'side', 'sift', 'sigh', 'sign', 'silk', 'sill', 'silo', 'silt', 'sine', 'sing', 'sink', 'sins', 'sips', 'sire', 'sirs', 'site', 'sits', 'size', 'skag', 'skat', 'skew', 'skid', 'skim', 'skin', 'skip', 'skis', 'skit', 'slab', 'slag', 'slam', 'slap', 'slat', 'slaw', 'slay', 'sled', 'slew', 'slid', 'slim', 'slip', 'slit', 'slob', 'sloe', 'slog', 'slop', 'slot', 'slow', 'slub', 'slue', 'slug', 'slum', 'slur', 'slut', 'smog', 'smug', 'smut', 'snag', 'snap', 'snip', 'snit', 'snob', 'snot', 'snow', 'snub', 'snug', 'soak', 'soap', 'soar', 'sobs', 'sock', 'soda', 'sods', 'sofa', 'soft', 'soil', 'sold', 'sole', 'solo', 'sols', 'some', 'song', 'sons', 'soon', 'soot', 'sops', 'sore', 'sort', 'sots', 'soul', 'soup', 'sour', 'sous', 'sown', 'sows', 'soya', 'soys', 'spam', 'span', 'spar', 'spas', 'spat', 'spay', 'spec', 'sped', 'spew', 'spin', 'spit', 'spot', 'spry', 'spud', 'spun', 'spur', 'stab', 'stag', 'star', 'stat', 'stay', 'stem', 'step', 'stew', 'stir', 'stop', 'stow', 'stub', 'stud', 'stun', 'stye', 'styx', 'subs', 'such', 'suck', 'suds', 'sued', 'suer', 'sues', 'suet', 'suit', 'sulk', 'sumo', 'sump', 'sums', 'sung', 'sunk', 'suns', 'supe', 'sups', 'sure', 'surf', 'swab', 'swag', 'swam', 'swan', 'swap', 'swat', 'sway', 'swig', 'swim', 'swop', 'swum',
            // T
            'tabs', 'tack', 'taco', 'tact', 'tads', 'tags', 'tail', 'take', 'tale', 'talk', 'tall', 'tame', 'tamp', 'tams', 'tang', 'tank', 'tans', 'tape', 'taps', 'tare', 'tarn', 'taro', 'tarp', 'tars', 'tart', 'task', 'tats', 'taut', 'taxi', 'teak', 'teal', 'team', 'tear', 'teas', 'teat', 'tech', 'teds', 'teed', 'teem', 'teen', 'tees', 'tell', 'temp', 'tend', 'tens', 'tent', 'term', 'tern', 'test', 'text', 'than', 'that', 'thaw', 'thee', 'them', 'then', 'thew', 'they', 'thin', 'this', 'thou', 'thud', 'thug', 'thus', 'tick', 'tics', 'tide', 'tidy', 'tied', 'tier', 'ties', 'tiff', 'tige', 'tile', 'till', 'tilt', 'time', 'tine', 'ting', 'tins', 'tint', 'tiny', 'tips', 'tire', 'toad', 'tock', 'toed', 'toes', 'toff', 'tofu', 'toga', 'togs', 'toil', 'toke', 'told', 'toll', 'tomb', 'tome', 'toms', 'tone', 'tong', 'tons', 'tony', 'took', 'tool', 'toot', 'tops', 'tore', 'torn', 'tort', 'tory', 'toss', 'tote', 'tots', 'tour', 'tout', 'town', 'tows', 'toys', 'tram', 'trap', 'tray', 'tree', 'trek', 'trim', 'trio', 'trip', 'trod', 'trog', 'trot', 'trow', 'troy', 'true', 'tsar', 'tubs', 'tuck', 'tuft', 'tugs', 'tuna', 'tune', 'tuns', 'turd', 'turf', 'turn', 'tusk', 'tuts', 'tutu', 'tux', 'twee', 'twig', 'twin', 'twit', 'twos', 'type', 'tyke', 'typo', 'tyro',
            // U - V - W
            'ugly', 'ukes', 'undo', 'unit', 'unto', 'upon', 'ural', 'urge', 'urns', 'used', 'user', 'uses', 'vain', 'vale', 'vamp', 'vane', 'vans', 'vary', 'vase', 'vast', 'vats', 'veal', 'veer', 'veil', 'vein', 'veld', 'vend', 'vent', 'verb', 'very', 'vest', 'veto', 'vets', 'vial', 'vibe', 'vice', 'vids', 'vied', 'vies', 'view', 'vile', 'vine', 'vino', 'vins', 'viny', 'viol', 'visa', 'vise', 'vita', 'viva', 'void', 'vole', 'volt', 'vote', 'vows', 'wade', 'wadi', 'wads', 'waft', 'wage', 'wags', 'waif', 'wail', 'wait', 'wake', 'walk', 'wall', 'wand', 'wane', 'want', 'ward', 'ware', 'warm', 'warn', 'warp', 'wars', 'wart', 'wary', 'wash', 'wasp', 'wast', 'watt', 'wave', 'wavy', 'waxy', 'ways', 'weak', 'weal', 'wean', 'wear', 'weds', 'weed', 'week', 'weep', 'wees', 'weft', 'weir', 'weld', 'well', 'welt', 'wend', 'went', 'wept', 'were', 'west', 'wets', 'whac', 'wham', 'what', 'when', 'whet', 'whew', 'whey', 'whim', 'whip', 'whir', 'whit', 'whiz', 'whom', 'whop', 'wick', 'wide', 'wife', 'wigs', 'wild', 'wile', 'will', 'wilt', 'wily', 'wimp', 'wind', 'wine', 'wing', 'wink', 'wino', 'wins', 'winy', 'wipe', 'wire', 'wiry', 'wise', 'wish', 'wisp', 'with', 'wits', 'wive', 'woad', 'woes', 'woke', 'woks', 'wolf', 'womb', 'wont', 'wood', 'woof', 'wool', 'woos', 'word', 'wore', 'work', 'worm', 'worn', 'wort', 'wove', 'wows', 'wrap', 'wren', 'writ', 'wuss',
            // X - Y - Z
            'xray', 'yack', 'yaks', 'yams', 'yang', 'yank', 'yaps', 'yard', 'yarn', 'yawn', 'yaws', 'yeah', 'year', 'yell', 'yelp', 'yens', 'yeps', 'yeti', 'yews', 'yids', 'yin', 'yins', 'yips', 'yogi', 'yoke', 'yolk', 'yond', 'yore', 'york', 'your', 'yowl', 'yoyo', 'yuan', 'yuck', 'yule', 'yums', 'yuppie', 'zany', 'zaps', 'zeal', 'zebu', 'zeds', 'zees', 'zens', 'zephzero', 'zest', 'zeta', 'zeus', 'zinc', 'zing', 'zion', 'zips', 'zits', 'zone', 'zonk', 'zoom', 'zoos', 'zulu', 'zyme'
        ]);

        // Daily puzzle pairs - 365 VALIDATED puzzles
        // CRITICAL RULE: For each puzzle, start[i] ≠ end[i] for ALL positions i
        // Every puzzle has been verified to have exactly 4 steps and no matching position letters
        const DAILY_PUZZLES = [
            { start: 'disk', solution: ['risk', 'rise', 'rose'], end: 'rode' },
            { start: 'roll', solution: ['toll', 'tall', 'tale'], end: 'tape' },
            { start: 'pain', solution: ['pail', 'sail', 'soil'], end: 'soul' },
            { start: 'hell', solution: ['tell', 'tall', 'talk'], end: 'tank' },
            { start: 'nose', solution: ['none', 'nine', 'fine'], end: 'find' },
            { start: 'milk', solution: ['mill', 'fill', 'fell'], end: 'feel' },
            { start: 'cold', solution: ['hold', 'held', 'head'], end: 'heat' },
            { start: 'gave', solution: ['gale', 'pale', 'pall'], end: 'poll' },
            { start: 'long', solution: ['lone', 'lane', 'sane'], end: 'safe' },
            { start: 'gold', solution: ['told', 'toll', 'tall'], end: 'tail' },
            { start: 'hill', solution: ['hell', 'sell', 'seal'], end: 'seat' },
            { start: 'road', solution: ['read', 'real', 'seal'], end: 'sell' },
            { start: 'made', solution: ['male', 'mall', 'fall'], end: 'fell' },
            { start: 'turn', solution: ['burn', 'barn', 'bare'], end: 'bake' },
            { start: 'pipe', solution: ['pile', 'file', 'fill'], end: 'fell' },
            { start: 'salt', solution: ['sale', 'sole', 'dole'], end: 'done' },
            { start: 'full', solution: ['fell', 'sell', 'seal'], end: 'sear' },
            { start: 'long', solution: ['lone', 'line', 'live'], end: 'give' },
            { start: 'jane', solution: ['lane', 'lace', 'lack'], end: 'lock' },
            { start: 'toll', solution: ['tall', 'tale', 'sale'], end: 'sage' },
            { start: 'milk', solution: ['mill', 'mall', 'mail'], end: 'rail' },
            { start: 'soft', solution: ['sort', 'fort', 'form'], end: 'firm' },
            { start: 'tell', solution: ['tall', 'gall', 'gale'], end: 'gate' },
            { start: 'land', solution: ['sand', 'said', 'sail'], end: 'soil' },
            { start: 'sane', solution: ['bane', 'bare', 'barn'], end: 'born' },
            { start: 'fear', solution: ['hear', 'head', 'held'], end: 'hold' },
            { start: 'turn', solution: ['torn', 'corn', 'cord'], end: 'cold' },
            { start: 'cake', solution: ['bake', 'bare', 'barn'], end: 'burn' },
            { start: 'toll', solution: ['till', 'mill', 'mile'], end: 'mine' },
            { start: 'foot', solution: ['fort', 'form', 'worm'], end: 'warm' },
            { start: 'date', solution: ['fate', 'fare', 'farm'], end: 'form' },
            { start: 'held', solution: ['head', 'dead', 'deal'], end: 'dual' },
            { start: 'fair', solution: ['fail', 'mail', 'mall'], end: 'mill' },
            { start: 'core', solution: ['care', 'case', 'cast'], end: 'fast' },
            { start: 'mike', solution: ['mile', 'file', 'fill'], end: 'fell' },
            { start: 'worm', solution: ['wore', 'wire', 'wife'], end: 'life' },
            { start: 'file', solution: ['fill', 'till', 'toll'], end: 'tool' },
            { start: 'bike', solution: ['bake', 'cake', 'care'], end: 'card' },
            { start: 'page', solution: ['pane', 'pine', 'wine'], end: 'wing' },
            { start: 'hill', solution: ['till', 'toll', 'tool'], end: 'took' },
            { start: 'dare', solution: ['dame', 'damp', 'dump'], end: 'jump' },
            { start: 'film', solution: ['file', 'pile', 'pale'], end: 'pace' },
            { start: 'loss', solution: ['lose', 'lone', 'lane'], end: 'pane' },
            { start: 'life', solution: ['lift', 'list', 'last'], end: 'east' },
            { start: 'core', solution: ['care', 'bare', 'bard'], end: 'bald' },
            { start: 'band', solution: ['bald', 'ball', 'tall'], end: 'tell' },
            { start: 'pass', solution: ['past', 'last', 'list'], end: 'lift' },
            { start: 'seal', solution: ['sell', 'fell', 'fill'], end: 'file' },
            { start: 'page', solution: ['cage', 'care', 'core'], end: 'corn' },
            { start: 'same', solution: ['sane', 'pane', 'pine'], end: 'pink' },
            { start: 'bear', solution: ['sear', 'soar', 'soak'], end: 'sock' },
            { start: 'ride', solution: ['wide', 'wire', 'wore'], end: 'word' },
            { start: 'nine', solution: ['wine', 'wise', 'wish'], end: 'wash' },
            { start: 'coda', solution: ['code', 'core', 'care'], end: 'bare' },
            { start: 'book', solution: ['boot', 'soot', 'shot'], end: 'shut' },
            { start: 'ease', solution: ['east', 'wast', 'west'], end: 'went' },
            { start: 'camp', solution: ['came', 'cake', 'bake'], end: 'bike' },
            { start: 'seed', solution: ['feed', 'feel', 'fell'], end: 'fill' },
            { start: 'wing', solution: ['wind', 'wild', 'weld'], end: 'meld' },
            { start: 'gold', solution: ['bold', 'bald', 'band'], end: 'bank' },
            { start: 'pall', solution: ['fall', 'fill', 'film'], end: 'firm' },
            { start: 'ball', solution: ['tall', 'tale', 'tape'], end: 'type' },
            { start: 'been', solution: ['seen', 'seed', 'send'], end: 'sand' },
            { start: 'silt', solution: ['salt', 'sale', 'gale'], end: 'gate' },
            { start: 'nine', solution: ['line', 'lone', 'lose'], end: 'loss' },
            { start: 'send', solution: ['sand', 'sane', 'sale'], end: 'tale' },
            { start: 'moon', solution: ['soon', 'soot', 'shot'], end: 'shut' },
            { start: 'tool', solution: ['toll', 'tall', 'wall'], end: 'walk' },
            { start: 'held', solution: ['hell', 'hall', 'pall'], end: 'pail' },
            { start: 'ford', solution: ['word', 'wore', 'wire'], end: 'wine' },
            { start: 'farm', solution: ['firm', 'film', 'fill'], end: 'mill' },
            { start: 'gild', solution: ['gold', 'bold', 'bond'], end: 'bone' },
            { start: 'born', solution: ['barn', 'bare', 'bake'], end: 'take' },
            { start: 'fall', solution: ['fell', 'sell', 'seal'], end: 'seam' },
            { start: 'wind', solution: ['wine', 'nine', 'none'], end: 'nose' },
            { start: 'torn', solution: ['worn', 'wore', 'wire'], end: 'wife' },
            { start: 'pick', solution: ['pack', 'back', 'bank'], end: 'band' },
            { start: 'fell', solution: ['fall', 'gall', 'gale'], end: 'game' },
            { start: 'bond', solution: ['band', 'bane', 'bake'], end: 'cake' },
            { start: 'card', solution: ['cord', 'cold', 'hold'], end: 'holy' },
            { start: 'this', solution: ['thin', 'then', 'teen'], end: 'seen' },
            { start: 'poll', solution: ['pall', 'ball', 'bald'], end: 'band' },
            { start: 'hole', solution: ['sole', 'sale', 'sane'], end: 'sank' },
            { start: 'this', solution: ['thin', 'then', 'teen'], end: 'been' },
            { start: 'bond', solution: ['bind', 'wind', 'wine'], end: 'wife' },
            { start: 'long', solution: ['lone', 'line', 'fine'], end: 'fire' },
            { start: 'film', solution: ['firm', 'farm', 'harm'], end: 'hard' },
            { start: 'loss', solution: ['lost', 'last', 'fast'], end: 'fact' },
            { start: 'hell', solution: ['hall', 'pall', 'pale'], end: 'pace' },
            { start: 'till', solution: ['tall', 'tale', 'take'], end: 'bake' },
            { start: 'read', solution: ['head', 'held', 'hell'], end: 'hall' },
            { start: 'cast', solution: ['last', 'lost', 'lose'], end: 'love' },
            { start: 'gold', solution: ['sold', 'sole', 'sale'], end: 'sake' },
            { start: 'hero', solution: ['here', 'were', 'wire'], end: 'wife' },
            { start: 'sear', solution: ['bear', 'beat', 'boat'], end: 'bolt' },
            { start: 'silt', solution: ['salt', 'sale', 'gale'], end: 'gave' },
            { start: 'wind', solution: ['wild', 'weld', 'well'], end: 'sell' },
            { start: 'wild', solution: ['wind', 'wink', 'rink'], end: 'rank' },
            { start: 'firm', solution: ['film', 'fill', 'hill'], end: 'hell' },
            { start: 'pick', solution: ['pack', 'pace', 'face'], end: 'fare' },
            { start: 'half', solution: ['hall', 'fall', 'fell'], end: 'feel' },
            { start: 'nose', solution: ['none', 'nine', 'wine'], end: 'wink' },
            { start: 'bolt', solution: ['belt', 'beat', 'bear'], end: 'dear' },
            { start: 'lord', solution: ['word', 'wore', 'wire'], end: 'wise' },
            { start: 'must', solution: ['most', 'cost', 'coat'], end: 'coal' },
            { start: 'till', solution: ['toll', 'told', 'toad'], end: 'road' },
            { start: 'cope', solution: ['core', 'care', 'bare'], end: 'barn' },
            { start: 'firm', solution: ['farm', 'fare', 'bare'], end: 'base' },
            { start: 'zone', solution: ['bone', 'bane', 'bank'], end: 'back' },
            { start: 'cold', solution: ['bold', 'bolt', 'belt'], end: 'best' },
            { start: 'film', solution: ['firm', 'form', 'fort'], end: 'port' },
            { start: 'warm', solution: ['worm', 'word', 'lord'], end: 'load' },
            { start: 'paid', solution: ['pail', 'pall', 'ball'], end: 'bill' },
            { start: 'mike', solution: ['make', 'cake', 'care'], end: 'card' },
            { start: 'fill', solution: ['till', 'tall', 'tale'], end: 'tape' },
            { start: 'cafe', solution: ['care', 'core', 'cord'], end: 'lord' },
            { start: 'bind', solution: ['band', 'bard', 'barn'], end: 'earn' },
            { start: 'bond', solution: ['band', 'bank', 'tank'], end: 'talk' },
            { start: 'sake', solution: ['bake', 'bare', 'barn'], end: 'born' },
            { start: 'fare', solution: ['care', 'case', 'cast'], end: 'cost' },
            { start: 'rich', solution: ['rice', 'race', 'rate'], end: 'hate' },
            { start: 'born', solution: ['corn', 'core', 'care'], end: 'came' },
            { start: 'ball', solution: ['pall', 'pale', 'pile'], end: 'pine' },
            { start: 'corn', solution: ['core', 'care', 'dare'], end: 'dame' },
            { start: 'tall', solution: ['tale', 'take', 'bake'], end: 'bike' },
            { start: 'golf', solution: ['gold', 'gild', 'wild'], end: 'wind' },
            { start: 'seal', solution: ['sell', 'well', 'will'], end: 'wild' },
            { start: 'west', solution: ['wast', 'cast', 'case'], end: 'came' },
            { start: 'cake', solution: ['lake', 'lace', 'lack'], end: 'luck' },
            { start: 'fate', solution: ['fare', 'bare', 'barn'], end: 'burn' },
            { start: 'bane', solution: ['bone', 'bond', 'bold'], end: 'hold' },
            { start: 'will', solution: ['wild', 'wind', 'bind'], end: 'bond' },
            { start: 'wind', solution: ['wild', 'will', 'mill'], end: 'mall' },
            { start: 'less', solution: ['loss', 'lose', 'dose'], end: 'dove' },
            { start: 'kent', solution: ['sent', 'seat', 'sear'], end: 'star' },
            { start: 'show', solution: ['snow', 'know', 'knew'], end: 'knee' },
            { start: 'good', solution: ['wood', 'word', 'ward'], end: 'warn' },
            { start: 'mall', solution: ['tall', 'toll', 'told'], end: 'toad' },
            { start: 'sell', solution: ['seal', 'real', 'read'], end: 'road' },
            { start: 'bake', solution: ['bare', 'bard', 'ward'], end: 'word' },
            { start: 'card', solution: ['cord', 'core', 'more'], end: 'mode' },
            { start: 'turn', solution: ['torn', 'corn', 'core'], end: 'come' },
            { start: 'face', solution: ['fact', 'fast', 'past'], end: 'post' },
            { start: 'dime', solution: ['dame', 'dare', 'bare'], end: 'bard' },
            { start: 'tell', solution: ['toll', 'tool', 'cool'], end: 'cook' },
            { start: 'hold', solution: ['bold', 'bolt', 'belt'], end: 'best' },
            { start: 'base', solution: ['bare', 'bard', 'ward'], end: 'word' },
            { start: 'coat', solution: ['cost', 'lost', 'loss'], end: 'less' },
            { start: 'last', solution: ['lost', 'lose', 'nose'], end: 'note' },
            { start: 'tone', solution: ['lone', 'lose', 'loss'], end: 'less' },
            { start: 'lost', solution: ['lose', 'lone', 'lane'], end: 'jane' },
            { start: 'paul', solution: ['pall', 'ball', 'bald'], end: 'bold' },
            { start: 'back', solution: ['bank', 'band', 'bind'], end: 'find' },
            { start: 'tape', solution: ['tale', 'pale', 'pall'], end: 'poll' },
            { start: 'soul', solution: ['soil', 'sail', 'pail'], end: 'pain' },
            { start: 'pall', solution: ['pale', 'pace', 'race'], end: 'rice' },
            { start: 'silt', solution: ['salt', 'sale', 'tale'], end: 'tame' },
            { start: 'pine', solution: ['pane', 'bane', 'bare'], end: 'bard' },
            { start: 'held', solution: ['hold', 'hole', 'role'], end: 'rope' },
            { start: 'gave', solution: ['save', 'sane', 'sank'], end: 'sink' },
            { start: 'sing', solution: ['sink', 'sank', 'tank'], end: 'task' },
            { start: 'beat', solution: ['belt', 'bell', 'bill'], end: 'mill' },
            { start: 'bond', solution: ['band', 'bank', 'back'], end: 'jack' },
            { start: 'sane', solution: ['lane', 'line', 'life'], end: 'lift' },
            { start: 'pace', solution: ['pale', 'tale', 'tall'], end: 'tell' },
            { start: 'warn', solution: ['worn', 'torn', 'tore'], end: 'tone' },
            { start: 'fell', solution: ['bell', 'belt', 'bolt'], end: 'boat' },
            { start: 'cold', solution: ['cord', 'card', 'care'], end: 'fare' },
            { start: 'bard', solution: ['bald', 'ball', 'tall'], end: 'till' },
            { start: 'rank', solution: ['rink', 'risk', 'disk'], end: 'disc' },
            { start: 'role', solution: ['sole', 'sale', 'sane'], end: 'sank' },
            { start: 'give', solution: ['gave', 'save', 'sane'], end: 'sank' },
            { start: 'make', solution: ['lake', 'like', 'line'], end: 'link' },
            { start: 'wash', solution: ['cash', 'cast', 'cost'], end: 'coat' },
            { start: 'wine', solution: ['wink', 'sink', 'sick'], end: 'sock' },
            { start: 'hear', solution: ['head', 'held', 'hold'], end: 'told' },
            { start: 'pool', solution: ['poll', 'pall', 'hall'], end: 'half' },
            { start: 'tell', solution: ['tall', 'pall', 'pail'], end: 'paid' },
            { start: 'well', solution: ['wall', 'mall', 'male'], end: 'make' },
            { start: 'call', solution: ['tall', 'toll', 'tool'], end: 'took' },
            { start: 'dawn', solution: ['down', 'town', 'torn'], end: 'tore' },
            { start: 'pale', solution: ['sale', 'sane', 'sank'], end: 'sink' },
            { start: 'sail', solution: ['fail', 'fall', 'fill'], end: 'file' },
            { start: 'wing', solution: ['wine', 'wise', 'rise'], end: 'rose' },
            { start: 'some', solution: ['same', 'sane', 'sand'], end: 'hand' },
            { start: 'bone', solution: ['bane', 'bare', 'bard'], end: 'ward' },
            { start: 'nine', solution: ['wine', 'wire', 'wore'], end: 'worm' },
            { start: 'gild', solution: ['gold', 'told', 'toll'], end: 'tool' },
            { start: 'jump', solution: ['dump', 'damp', 'dame'], end: 'date' },
            { start: 'belt', solution: ['bell', 'tell', 'tall'], end: 'tail' },
            { start: 'cage', solution: ['sage', 'sane', 'sand'], end: 'send' },
            { start: 'wave', solution: ['cave', 'cove', 'cope'], end: 'copy' },
            { start: 'lake', solution: ['sake', 'sale', 'sole'], end: 'sold' },
            { start: 'tell', solution: ['tall', 'tale', 'sale'], end: 'save' },
            { start: 'mode', solution: ['made', 'male', 'tale'], end: 'talk' },
            { start: 'word', solution: ['wore', 'wire', 'wide'], end: 'tide' },
            { start: 'dare', solution: ['care', 'core', 'cord'], end: 'cold' },
            { start: 'milk', solution: ['mill', 'till', 'toll'], end: 'tool' },
            { start: 'feed', solution: ['feel', 'fell', 'fall'], end: 'pall' },
            { start: 'best', solution: ['belt', 'felt', 'fell'], end: 'full' },
            { start: 'fare', solution: ['fire', 'fine', 'pine'], end: 'pink' },
            { start: 'harm', solution: ['farm', 'form', 'ford'], end: 'food' },
            { start: 'bird', solution: ['bard', 'bare', 'fare'], end: 'face' },
            { start: 'ride', solution: ['rode', 'role', 'roll'], end: 'poll' },
            { start: 'barn', solution: ['bare', 'bane', 'lane'], end: 'lone' },
            { start: 'hold', solution: ['sold', 'sole', 'sale'], end: 'same' },
            { start: 'save', solution: ['sane', 'sank', 'sink'], end: 'wink' },
            { start: 'will', solution: ['wall', 'pall', 'pale'], end: 'pane' },
            { start: 'till', solution: ['mill', 'mall', 'male'], end: 'made' },
            { start: 'barn', solution: ['born', 'corn', 'cord'], end: 'cold' },
            { start: 'wild', solution: ['wind', 'wine', 'nine'], end: 'none' },
            { start: 'ship', solution: ['slip', 'slap', 'slaw'], end: 'claw' },
            { start: 'fund', solution: ['find', 'fine', 'fire'], end: 'hire' },
            { start: 'told', solution: ['toll', 'tell', 'sell'], end: 'seal' },
            { start: 'coal', solution: ['coat', 'cost', 'cast'], end: 'vast' },
            { start: 'soar', solution: ['sear', 'seam', 'team'], end: 'term' },
            { start: 'tall', solution: ['tale', 'sale', 'sole'], end: 'some' },
            { start: 'lift', solution: ['life', 'like', 'mike'], end: 'make' },
            { start: 'sink', solution: ['link', 'line', 'lane'], end: 'lace' },
            { start: 'land', solution: ['band', 'bard', 'barn'], end: 'burn' },
            { start: 'full', solution: ['fall', 'gall', 'gale'], end: 'game' },
            { start: 'time', solution: ['tame', 'game', 'gale'], end: 'gall' },
            { start: 'milk', solution: ['mile', 'male', 'gale'], end: 'game' },
            { start: 'pink', solution: ['sink', 'silk', 'silt'], end: 'salt' },
            { start: 'some', solution: ['same', 'dame', 'date'], end: 'data' },
            { start: 'wall', solution: ['pall', 'pale', 'pile'], end: 'pipe' },
            { start: 'sail', solution: ['said', 'sand', 'band'], end: 'bond' },
            { start: 'sand', solution: ['send', 'seed', 'seen'], end: 'teen' },
            { start: 'firm', solution: ['film', 'fill', 'bill'], end: 'ball' },
            { start: 'fell', solution: ['fall', 'fail', 'rail'], end: 'rain' },
            { start: 'rice', solution: ['race', 'rate', 'date'], end: 'data' },
            { start: 'wild', solution: ['will', 'wall', 'pall'], end: 'paul' },
            { start: 'same', solution: ['came', 'case', 'cast'], end: 'cost' },
            { start: 'kick', solution: ['sick', 'sink', 'sing'], end: 'song' },
            { start: 'lone', solution: ['lane', 'sane', 'sank'], end: 'sack' },
            { start: 'hold', solution: ['sold', 'sole', 'sale'], end: 'sage' },
            { start: 'till', solution: ['toll', 'roll', 'role'], end: 'rope' },
            { start: 'come', solution: ['core', 'corn', 'born'], end: 'burn' },
            { start: 'give', solution: ['gave', 'cave', 'case'], end: 'cash' },
            { start: 'said', solution: ['sand', 'hand', 'hang'], end: 'hung' },
            { start: 'lock', solution: ['lack', 'lace', 'late'], end: 'date' },
            { start: 'cell', solution: ['call', 'mall', 'mail'], end: 'main' },
            { start: 'bolt', solution: ['bold', 'bald', 'band'], end: 'sand' },
            { start: 'vast', solution: ['last', 'lost', 'lose'], end: 'lone' },
            { start: 'will', solution: ['till', 'tall', 'tale'], end: 'take' },
            { start: 'sage', solution: ['sale', 'tale', 'tall'], end: 'till' },
            { start: 'fare', solution: ['fire', 'wire', 'wine'], end: 'wind' },
            { start: 'cake', solution: ['care', 'core', 'wore'], end: 'worn' },
            { start: 'fill', solution: ['fall', 'gall', 'gale'], end: 'gave' },
            { start: 'bank', solution: ['band', 'bond', 'bold'], end: 'told' },
            { start: 'seal', solution: ['sell', 'hell', 'held'], end: 'hold' },
            { start: 'well', solution: ['tell', 'tall', 'tale'], end: 'tape' },
            { start: 'pack', solution: ['pace', 'pale', 'male'], end: 'mile' },
            { start: 'cake', solution: ['care', 'core', 'cord'], end: 'ford' },
            { start: 'wine', solution: ['line', 'life', 'lift'], end: 'left' },
            { start: 'fast', solution: ['last', 'lost', 'lose'], end: 'lone' },
            { start: 'hurt', solution: ['hunt', 'hung', 'hang'], end: 'rang' },
            { start: 'bold', solution: ['bolt', 'boat', 'coat'], end: 'chat' },
            { start: 'wish', solution: ['wise', 'wine', 'pine'], end: 'pane' },
            { start: 'kill', solution: ['fill', 'fall', 'fail'], end: 'fair' },
            { start: 'pail', solution: ['pall', 'hall', 'hell'], end: 'held' },
            { start: 'wake', solution: ['bake', 'bare', 'barn'], end: 'born' },
            { start: 'bind', solution: ['band', 'land', 'lane'], end: 'lace' },
            { start: 'barn', solution: ['bard', 'bald', 'bold'], end: 'told' },
            { start: 'sage', solution: ['sale', 'male', 'mile'], end: 'mill' },
            { start: 'base', solution: ['bane', 'bone', 'bond'], end: 'pond' },
            { start: 'roll', solution: ['role', 'rode', 'ride'], end: 'tide' },
            { start: 'cost', solution: ['cast', 'case', 'cave'], end: 'save' },
            { start: 'rock', solution: ['sock', 'sick', 'silk'], end: 'silt' },
            { start: 'jane', solution: ['sane', 'sale', 'sole'], end: 'sold' },
            { start: 'cave', solution: ['case', 'cash', 'wash'], end: 'wish' },
            { start: 'cost', solution: ['coat', 'boat', 'beat'], end: 'bear' },
            { start: 'toad', solution: ['told', 'toll', 'till'], end: 'fill' },
            { start: 'rise', solution: ['wise', 'wire', 'wore'], end: 'word' },
            { start: 'word', solution: ['wore', 'wire', 'fire'], end: 'five' },
            { start: 'soot', solution: ['boot', 'boat', 'beat'], end: 'bear' },
            { start: 'task', solution: ['talk', 'tall', 'tell'], end: 'sell' },
            { start: 'seen', solution: ['seed', 'send', 'sand'], end: 'land' },
            { start: 'rope', solution: ['role', 'roll', 'toll'], end: 'tell' },
            { start: 'bank', solution: ['bane', 'bone', 'done'], end: 'dove' },
            { start: 'same', solution: ['came', 'come', 'core'], end: 'cord' },
            { start: 'rare', solution: ['care', 'core', 'code'], end: 'coda' },
            { start: 'male', solution: ['mile', 'file', 'fire'], end: 'firm' },
            { start: 'bell', solution: ['ball', 'mall', 'mail'], end: 'maid' },
            { start: 'wish', solution: ['wise', 'wire', 'wore'], end: 'more' },
            { start: 'lift', solution: ['life', 'line', 'lone'], end: 'done' },
            { start: 'nose', solution: ['none', 'nine', 'mine'], end: 'mind' },
            { start: 'bear', solution: ['hear', 'head', 'held'], end: 'hold' },
            { start: 'weld', solution: ['wild', 'wind', 'wine'], end: 'line' },
            { start: 'root', solution: ['boot', 'boat', 'beat'], end: 'bear' },
            { start: 'bare', solution: ['bard', 'bald', 'bold'], end: 'sold' },
            { start: 'gulf', solution: ['golf', 'gold', 'cold'], end: 'cord' },
            { start: 'bill', solution: ['mill', 'mall', 'mail'], end: 'maid' },
            { start: 'bird', solution: ['bind', 'bond', 'bone'], end: 'tone' },
            { start: 'fine', solution: ['fire', 'fare', 'bare'], end: 'bard' },
            { start: 'mill', solution: ['till', 'tall', 'talk'], end: 'tank' },
            { start: 'palm', solution: ['pale', 'pace', 'race'], end: 'rice' },
            { start: 'sear', solution: ['seat', 'sent', 'went'], end: 'want' },
            { start: 'sand', solution: ['land', 'lane', 'lone'], end: 'love' },
            { start: 'sake', solution: ['make', 'mike', 'mile'], end: 'mill' },
            { start: 'lack', solution: ['lock', 'look', 'cook'], end: 'cool' },
            { start: 'task', solution: ['talk', 'tall', 'call'], end: 'cell' },
            { start: 'bone', solution: ['bane', 'bare', 'fare'], end: 'farm' },
            { start: 'past', solution: ['last', 'list', 'lift'], end: 'life' },
            { start: 'send', solution: ['sand', 'sane', 'same'], end: 'came' },
            { start: 'sake', solution: ['bake', 'bare', 'bard'], end: 'bird' },
            { start: 'line', solution: ['fine', 'file', 'fill'], end: 'fall' },
            { start: 'tell', solution: ['sell', 'seal', 'sear'], end: 'soar' },
            { start: 'tell', solution: ['tall', 'tale', 'take'], end: 'wake' },
            { start: 'tank', solution: ['talk', 'tall', 'ball'], end: 'bill' },
            { start: 'page', solution: ['pale', 'tale', 'tall'], end: 'toll' },
            { start: 'sand', solution: ['send', 'seed', 'seen'], end: 'been' },
            { start: 'send', solution: ['sand', 'sane', 'sake'], end: 'wake' },
            { start: 'dose', solution: ['done', 'bone', 'bane'], end: 'band' },
            { start: 'word', solution: ['wore', 'more', 'mode'], end: 'made' },
            { start: 'ward', solution: ['card', 'cord', 'core'], end: 'code' },
            { start: 'hire', solution: ['wire', 'wore', 'word'], end: 'wood' },
            { start: 'bind', solution: ['band', 'bald', 'ball'], end: 'call' },
            { start: 'mine', solution: ['mile', 'mill', 'hill'], end: 'hell' },
            { start: 'tell', solution: ['toll', 'tool', 'took'], end: 'look' },
            { start: 'dump', solution: ['damp', 'dame', 'same'], end: 'safe' },
            { start: 'west', solution: ['went', 'sent', 'send'], end: 'sand' },
            { start: 'sand', solution: ['sane', 'sale', 'male'], end: 'mile' },
            { start: 'wing', solution: ['wine', 'pine', 'pane'], end: 'pace' },
            { start: 'gone', solution: ['lone', 'line', 'life'], end: 'lift' },
            { start: 'cook', solution: ['book', 'boot', 'bolt'], end: 'belt' },
            { start: 'sane', solution: ['bane', 'bare', 'bard'], end: 'bird' },
            { start: 'cake', solution: ['bake', 'bare', 'barn'], end: 'born' },
            { start: 'save', solution: ['sale', 'male', 'mile'], end: 'mill' },
            { start: 'mall', solution: ['mill', 'mile', 'mike'], end: 'like' },
            { start: 'dame', solution: ['came', 'come', 'core'], end: 'cord' },
            { start: 'card', solution: ['cord', 'core', 'cope'], end: 'rope' },
            { start: 'hero', solution: ['here', 'hire', 'hide'], end: 'ride' },
            { start: 'dose', solution: ['done', 'bone', 'bane'], end: 'bank' },
            { start: 'pace', solution: ['pale', 'tale', 'tall'], end: 'toll' },
            { start: 'salt', solution: ['sale', 'pale', 'pile'], end: 'pine' },
            { start: 'lift', solution: ['list', 'last', 'east'], end: 'easy' },
            { start: 'cold', solution: ['sold', 'sole', 'sale'], end: 'sake' },
            { start: 'back', solution: ['bank', 'band', 'bind'], end: 'mind' },
            { start: 'rice', solution: ['race', 'rare', 'bare'], end: 'bard' },
            { start: 'born', solution: ['barn', 'bare', 'fare'], end: 'fate' },
            { start: 'wage', solution: ['page', 'pale', 'pall'], end: 'poll' },
            { start: 'cave', solution: ['case', 'cast', 'cost'], end: 'host' },
            { start: 'bond', solution: ['bind', 'mind', 'mine'], end: 'mike' },
            { start: 'life', solution: ['line', 'lone', 'bone'], end: 'bond' },
            { start: 'bold', solution: ['bond', 'bone', 'tone'], end: 'tune' },
            { start: 'boot', solution: ['bolt', 'bold', 'gold'], end: 'gild' },
            { start: 'else', solution: ['ease', 'east', 'wast'], end: 'want' },
            { start: 'game', solution: ['gale', 'pale', 'pall'], end: 'poll' },
            { start: 'hell', solution: ['held', 'hold', 'gold'], end: 'good' },
            { start: 'bare', solution: ['bane', 'bank', 'rank'], end: 'rink' },
            { start: 'hand', solution: ['land', 'lane', 'line'], end: 'like' },
            { start: 'fire', solution: ['file', 'fill', 'fell'], end: 'sell' },
            { start: 'soft', solution: ['sort', 'port', 'part'], end: 'park' },
            { start: 'cell', solution: ['sell', 'seal', 'sear'], end: 'star' },
            { start: 'tank', solution: ['talk', 'tall', 'tell'], end: 'sell' },
            { start: 'sage', solution: ['sane', 'bane', 'bone'], end: 'bond' },
            { start: 'full', solution: ['fall', 'pall', 'pail'], end: 'pain' },
            { start: 'back', solution: ['pack', 'pace', 'pale'], end: 'pile' },
            { start: 'rose', solution: ['role', 'hole', 'hold'], end: 'held' },
            { start: 'mall', solution: ['gall', 'gale', 'gave'], end: 'give' },
            { start: 'warm', solution: ['worm', 'wore', 'core'], end: 'come' },
            { start: 'soap', solution: ['soak', 'sock', 'lock'], end: 'luck' },
            { start: 'mill', solution: ['fill', 'film', 'firm'], end: 'form' },
            { start: 'love', solution: ['lose', 'lost', 'last'], end: 'wast' }
        ];

        // Game state
        let currentPuzzle = null;
        let currentPuzzleSolutions = []; // All valid solutions for current puzzle
        let attemptsRemaining = 3;
        let gameOver = false;
        // Game state enum
        const GameState = {
            IDLE: 'idle',      // Before play button clicked
            PLAYING: 'playing', // Timer running, puzzle in progress
            SOLVED: 'solved'    // Puzzle completed, timer frozen
        };

        let gameState = GameState.IDLE;  // Current game state
        let finalSolveSeconds = null;    // Store final solve time in seconds (immutable after solve)
        let puzzleSolved = false;  // Track if puzzle has been solved (locks game state)
        let lastSolvedSolution = null;  // Store the last solved solution for reopening success screen
        let gameStartTime = null;  // Track when user starts playing
        let timerInterval = null;  // Timer update interval
        let timerVisible = false;  // Track if timer is visible
        let finalSolveTime = null;  // Store final solve time in human-readable format

        // Get elapsed seconds - returns frozen time if solved, live time if playing
        function getElapsedSeconds() {
            if (gameState === GameState.SOLVED && finalSolveSeconds !== null) {
                return finalSolveSeconds;  // Return frozen time
            }
            if (gameStartTime) {
                return Math.floor((Date.now() - gameStartTime) / 1000);  // Return live time
            }
            return 0;
        }

        // Toggle between Check Path and See Results buttons
        function updateButtonVisibility() {
            const checkBtn = document.getElementById('check-btn');
            const seeResultsBtn = document.getElementById('see-results-btn');

            if (puzzleSolved) {
                // Show See Results, hide Check Path
                checkBtn.style.display = 'none';
                seeResultsBtn.style.display = 'block';
            } else {
                // Show Check Path, hide See Results
                checkBtn.style.display = 'block';
                seeResultsBtn.style.display = 'none';
            }
        }

        // Disable all inputs when puzzle is solved
        function disableInputs() {
            document.querySelectorAll('.word-input').forEach(input => {
                input.disabled = true;
                input.style.cursor = 'not-allowed';
                input.style.opacity = '0.7';
            });
        }

        // Enable all inputs (for new game)
        function enableInputs() {
            document.querySelectorAll('.word-input').forEach(input => {
                input.disabled = false;
                input.style.cursor = 'text';
                input.style.opacity = '1';
            });
        }

        // Reopen the success screen with the last solved solution
        function reopenSuccessScreen() {
            if (lastSolvedSolution && puzzleSolved) {
                showSuccessScreen(lastSolvedSolution);
            }
        }

        // Format elapsed seconds as mm:ss for timer display
        function formatTimeMMSS(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${minutes}:${String(secs).padStart(2, '0')}`;
        }

        // Format elapsed seconds as human-readable text
        function formatTimeHumanReadable(seconds) {
            if (seconds < 60) {
                // Under 1 minute: "20 seconds"
                return `${seconds} second${seconds === 1 ? '' : 's'}`;
            } else {
                // 1 minute or more
                const minutes = Math.floor(seconds / 60);
                const secs = seconds % 60;
                const minuteText = `${minutes} minute${minutes === 1 ? '' : 's'}`;

                if (secs === 0) {
                    // No seconds: "2 minutes"
                    return minuteText;
                } else {
                    // With seconds: "1 minute 18 seconds" (no "and")
                    const secondText = `${secs} second${secs === 1 ? '' : 's'}`;
                    return `${minuteText} ${secondText}`;
                }
            }
        }

        // Update timer display
        function updateTimer() {
            if (gameState === GameState.IDLE) return;

            const elapsedSeconds = getElapsedSeconds();
            const timerToggle = document.getElementById('timer-toggle');

            if (timerVisible && timerToggle) {
                timerToggle.textContent = formatTimeMMSS(elapsedSeconds);
            }
        }

        // Player statistics tracking
        function getPlayerStats() {
            const defaultStats = {
                gamesPlayed: 0,
                gamesWon: 0,
                lastCompletedPuzzle: null  // Store puzzle identifier to prevent duplicate counting
            };

            try {
                const stored = localStorage.getItem('wordHopStats');
                return stored ? { ...defaultStats, ...JSON.parse(stored) } : defaultStats;
            } catch (e) {
                console.error('Error reading stats from localStorage:', e);
                return defaultStats;
            }
        }

        function savePlayerStats(stats) {
            try {
                localStorage.setItem('wordHopStats', JSON.stringify(stats));
            } catch (e) {
                console.error('Error saving stats to localStorage:', e);
            }
        }

        function getPuzzleIdentifier() {
            // Create unique identifier for today's puzzle based on start and end words
            if (!currentPuzzle) return null;
            return `${currentPuzzle.start}-${currentPuzzle.end}`;
        }

        function updateStatsOnWin() {
            const stats = getPlayerStats();
            const puzzleId = getPuzzleIdentifier();

            // Check if this puzzle was already completed
            if (stats.lastCompletedPuzzle === puzzleId) {
                console.log('Stats already updated for this puzzle');
                return stats;  // Don't count again
            }

            // Update stats
            stats.gamesPlayed += 1;
            stats.gamesWon += 1;
            stats.lastCompletedPuzzle = puzzleId;

            savePlayerStats(stats);
            console.log('Stats updated:', stats);
            return stats;
        }

        function calculateWinPercentage(stats) {
            if (stats.gamesPlayed === 0) return 0;
            return Math.round((stats.gamesWon / stats.gamesPlayed) * 100);
        }

        // Tab switching
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab
            if (tabName === 'play') {
                document.getElementById('play-tab').classList.add('active');
                document.querySelectorAll('.tab')[0].classList.add('active');
            } else if (tabName === 'how-to-play') {
                document.getElementById('how-to-play-tab').classList.add('active');
                document.querySelectorAll('.tab')[1].classList.add('active');
            }
        }

        // Get today's puzzle
        function getTodaysPuzzle() {
            // Safety check: Ensure we have puzzles
            if (!DAILY_PUZZLES || DAILY_PUZZLES.length === 0) {
                console.error('❌ CRITICAL: No puzzles available in DAILY_PUZZLES array');
                return null;
            }

            // Get current date in ET timezone
            const now = new Date();
            const etDateString = now.toLocaleDateString("en-US", {
                timeZone: "America/New_York",
                year: 'numeric',
                month: '2-digit',
                day: '2-digit'
            });

            // Parse the ET date (format: MM/DD/YYYY)
            const [month, day, year] = etDateString.split('/');
            const etDate = new Date(year, month - 1, day);

            // Calculate days since a reference date (Jan 1, 2024)
            const referenceDate = new Date(2024, 0, 1);
            const daysSinceReference = Math.floor((etDate - referenceDate) / (1000 * 60 * 60 * 24));

            const puzzleIndex = daysSinceReference % DAILY_PUZZLES.length;
            const selectedPuzzle = DAILY_PUZZLES[puzzleIndex];

            console.log(`📅 Today's puzzle index: ${puzzleIndex} (out of ${DAILY_PUZZLES.length} puzzles)`);

            // Safety check: Ensure selected puzzle exists
            if (!selectedPuzzle) {
                console.error(`❌ CRITICAL: Puzzle at index ${puzzleIndex} is undefined`);
                console.log('Using first available puzzle as fallback');
                return DAILY_PUZZLES[0];
            }

            console.log(`✅ Selected puzzle: ${selectedPuzzle.start.toUpperCase()} → ${selectedPuzzle.end.toUpperCase()}`);

            // After filtering, all puzzles in DAILY_PUZZLES are already validated
            // No need to re-validate, just return the selected puzzle
            return selectedPuzzle;
        }

        // Check if two words differ by exactly one letter
        function oneLetterDiff(word1, word2) {
            if (word1.length !== word2.length) return false;
            let diffCount = 0;
            for (let i = 0; i < word1.length; i++) {
                if (word1[i] !== word2[i]) diffCount++;
            }
            return diffCount === 1;
        }

        // Find all valid words that differ by exactly one letter
        function findNeighbors(word) {
            const neighbors = [];
            const wordArray = word.split('');

            for (let i = 0; i < wordArray.length; i++) {
                const originalChar = wordArray[i];

                // Try all letters a-z at this position
                for (let charCode = 97; charCode <= 122; charCode++) {
                    const newChar = String.fromCharCode(charCode);

                    if (newChar === originalChar) continue;

                    wordArray[i] = newChar;
                    const newWord = wordArray.join('');

                    if (VALID_WORDS.has(newWord)) {
                        neighbors.push(newWord);
                    }
                }

                wordArray[i] = originalChar;
            }

            return neighbors;
        }

        // Find shortest path length between two words using BFS
        function findShortestPathLength(startWord, endWord) {
            if (startWord === endWord) return 0;
            if (!VALID_WORDS.has(startWord) || !VALID_WORDS.has(endWord)) return -1;

            const queue = [[startWord, 0]]; // [word, distance]
            const visited = new Set([startWord]);

            while (queue.length > 0) {
                const [currentWord, distance] = queue.shift();

                // Get all neighbors
                const neighbors = findNeighbors(currentWord);

                for (const neighbor of neighbors) {
                    if (neighbor === endWord) {
                        return distance + 1;
                    }

                    if (!visited.has(neighbor)) {
                        visited.add(neighbor);
                        queue.push([neighbor, distance + 1]);
                    }
                }
            }

            return -1; // No path exists
        }

        // Find all valid paths of exactly N steps from start to end using DFS
        function findAllPaths(startWord, endWord, pathLength = 4) {
            const allPaths = [];

            function dfs(currentWord, path, depth) {
                // If we've taken the required number of steps
                if (depth === pathLength) {
                    // Check if we reached the end
                    if (currentWord === endWord) {
                        // Store the intermediary words (exclude start at index 0 and end at last index)
                        const intermediaryWords = path.slice(1, path.length - 1);
                        allPaths.push(intermediaryWords);
                    }
                    return;
                }

                // Explore all neighbors
                const neighbors = findNeighbors(currentWord);
                for (const neighbor of neighbors) {
                    // Avoid cycles - don't revisit words already in the path
                    if (!path.includes(neighbor)) {
                        dfs(neighbor, [...path, neighbor], depth + 1);
                    }
                }
            }

            dfs(startWord, [startWord], 0);
            return allPaths;
        }

        // Validate puzzle difficulty - ensures shortest path is exactly the required number of steps
        function isValidPuzzleDifficulty(startWord, endWord, requiredSteps = 4) {
            const shortestPath = findShortestPathLength(startWord, endWord);

            if (shortestPath === -1) {
                console.warn(`No path exists between ${startWord} and ${endWord}`);
                return false;
            }

            if (shortestPath !== requiredSteps) {
                console.warn(
                    `Path between ${startWord} and ${endWord} is ${shortestPath} steps, ` +
                    `but ${requiredSteps} steps required`
                );
                return false;
            }

            return true;
        }

        /**
         * ═══════════════════════════════════════════════════════════════════════════
         * PUZZLE VALIDATION SYSTEM - CRITICAL GAME LOGIC
         * ═══════════════════════════════════════════════════════════════════════════
         *
         * PURPOSE:
         *   Ensure EVERY puzzle is solvable before it reaches players.
         *   An impossible puzzle breaks player trust and damages the game's reputation.
         *
         * HOW IT WORKS:
         *   1. BFS (Breadth-First Search) - Finds shortest path between words
         *      - Returns -1 if NO path exists (completely unsolvable)
         *      - Returns N if shortest path is N steps
         *
         *   2. DFS (Depth-First Search) - Finds ALL valid paths of exactly 4 steps
         *      - Explores all possible word chains
         *      - Returns array of all valid solutions
         *
         *   3. Validation Checks:
         *      ✓ Words same length
         *      ✓ Both words in dictionary
         *      ✓ Path exists (BFS returns != -1)
         *      ✓ At least one solution with exactly 4 steps
         *      ✓ Shortest path = 4 (correct difficulty)
         *
         * VALIDATION ENFORCEMENTS:
         *   - validateAllPuzzles() runs BEFORE game initialization
         *   - If ANY puzzle fails validation → game WILL NOT load
         *   - Red error screen displayed to developers
         *   - Detailed validation report in console
         *
         * DEVELOPER USAGE:
         *   Test a new puzzle in browser console:
         *     validatePuzzle('word1', 'word2')
         *
         *   Example: validatePuzzle('tank', 'sell')
         *   Output:
         *     ✓ Path exists: 4 steps
         *     ✓ Found 2 solutions
         *     ✅ VALID PUZZLE
         *     Sample solutions:
         *       1. TANK → TALK → TALL → TELL → SELL
         *       2. TANK → TALK → TALE → TELL → SELL
         *
         * ADDING NEW PUZZLES:
         *   1. Test puzzle with validatePuzzle('start', 'end')
         *   2. If validation passes, add to DAILY_PUZZLES array
         *   3. If validation fails, choose different word pair
         *   4. NEVER add unvalidated puzzles to production
         *
         * CRITICAL EXAMPLES:
         *   ❌ validatePuzzle('abcd', 'wxyz')  → REJECTED (no path exists)
         *   ❌ validatePuzzle('word', 'worm')  → REJECTED (shortest path = 1 step, not 4)
         *   ✅ validatePuzzle('tank', 'sell')  → ACCEPTED (multiple 4-step solutions)
         *
         * ═══════════════════════════════════════════════════════════════════════════
         */

        // Helper function to validate a single puzzle pair before adding to DAILY_PUZZLES
        // USE THIS when creating new puzzles to ensure they're solvable
        function validatePuzzlePair(startWord, endWord, requiredSteps = 4) {
            console.log(`\n🔍 Validating puzzle: ${startWord.toUpperCase()} → ${endWord.toUpperCase()}`);
            console.log('─'.repeat(60));

            // Check 1: Words must be same length
            if (startWord.length !== endWord.length) {
                console.error(`❌ INVALID: Words must be same length`);
                console.error(`   ${startWord} (${startWord.length} letters) vs ${endWord} (${endWord.length} letters)`);
                return {
                    valid: false,
                    reason: 'Different word lengths',
                    solutionCount: 0,
                    shortestPath: -1
                };
            }

            // Check 2: Both words must be in the word list
            if (!VALID_WORDS.has(startWord)) {
                console.error(`❌ INVALID: "${startWord}" is not in the word list`);
                return {
                    valid: false,
                    reason: `Start word "${startWord}" not in dictionary`,
                    solutionCount: 0,
                    shortestPath: -1
                };
            }
            if (!VALID_WORDS.has(endWord)) {
                console.error(`❌ INVALID: "${endWord}" is not in the word list`);
                return {
                    valid: false,
                    reason: `End word "${endWord}" not in dictionary`,
                    solutionCount: 0,
                    shortestPath: -1
                };
            }

            // Check 3: Find shortest path (BFS)
            const shortestPath = findShortestPathLength(startWord, endWord);

            if (shortestPath === -1) {
                console.error(`❌ UNSOLVABLE: No path exists between these words`);
                console.error(`   This puzzle can NEVER be solved - it must be rejected`);
                return {
                    valid: false,
                    reason: 'No path exists (completely unsolvable)',
                    solutionCount: 0,
                    shortestPath: -1
                };
            }

            console.log(`✓ Path exists: Shortest path is ${shortestPath} steps`);

            // Check 4: Find all solutions of exactly N steps (DFS)
            const allSolutions = findAllPaths(startWord, endWord, requiredSteps);
            const solutionCount = allSolutions.length;

            console.log(`✓ Found ${solutionCount} solution(s) with exactly ${requiredSteps} steps`);

            if (solutionCount === 0) {
                console.error(`❌ UNSOLVABLE: No ${requiredSteps}-step solutions exist`);
                console.error(`   Shortest path is ${shortestPath} steps, but we need exactly ${requiredSteps} steps`);
                return {
                    valid: false,
                    reason: `No ${requiredSteps}-step solutions (shortest is ${shortestPath})`,
                    solutionCount: 0,
                    shortestPath
                };
            }

            // Check 5: Verify difficulty matches requirement
            if (shortestPath !== requiredSteps) {
                console.warn(`⚠ WRONG DIFFICULTY: Shortest path (${shortestPath}) != required (${requiredSteps})`);
                return {
                    valid: false,
                    reason: `Wrong difficulty: shortest path is ${shortestPath} steps, not ${requiredSteps}`,
                    solutionCount,
                    shortestPath
                };
            }

            // ALL CHECKS PASSED
            console.log(`✅ VALID PUZZLE: ${solutionCount} solution(s) available`);
            console.log('Sample solutions:');
            allSolutions.slice(0, 3).forEach((solution, idx) => {
                const fullPath = [startWord, ...solution, endWord].map(w => w.toUpperCase()).join(' → ');
                console.log(`   ${idx + 1}. ${fullPath}`);
            });
            if (allSolutions.length > 3) {
                console.log(`   ... and ${allSolutions.length - 3} more`);
            }

            return {
                valid: true,
                reason: 'All validation checks passed',
                solutionCount,
                shortestPath,
                solutions: allSolutions
            };
        }

        // CRITICAL: Validate all puzzles and FILTER OUT invalid ones
        // This is a NON-NEGOTIABLE requirement - ONLY solvable puzzles reach players
        function validateAndFilterPuzzles() {
            console.log('🔍 VALIDATING ALL DAILY PUZZLES (FILTERING OUT INVALID)...');
            console.log('━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━');

            const requiredSteps = 4; // 3 blank spaces = 4 total steps
            const validPuzzles = [];
            const invalidPuzzles = [];
            let originalCount = DAILY_PUZZLES.length;

            DAILY_PUZZLES.forEach((puzzle, index) => {
                // Step 1: Check if path exists (BFS)
                const pathLength = findShortestPathLength(puzzle.start, puzzle.end);

                // Step 2: Find ALL valid solutions of exactly 4 steps (DFS)
                const allSolutions = findAllPaths(puzzle.start, puzzle.end, requiredSteps);
                const solutionCount = allSolutions.length;

                // Store validation metadata in puzzle object
                puzzle.validationData = {
                    shortestPathLength: pathLength,
                    solutionCount: solutionCount,
                    isValid: pathLength === requiredSteps && solutionCount > 0,
                    isSolvable: pathLength !== -1
                };

                // DECISION: Keep or discard this puzzle?
                const isValid = pathLength === requiredSteps && solutionCount > 0;

                if (isValid) {
                    // ✅ VALID - Add to valid puzzles array
                    validPuzzles.push(puzzle);
                    console.log(
                        `✓ Puzzle ${index}: ${puzzle.start.toUpperCase()} → ${puzzle.end.toUpperCase()}`,
                        `| Solutions: ${solutionCount} | KEPT`
                    );
                } else {
                    // ❌ INVALID - Add to trash, log reason
                    invalidPuzzles.push({
                        index,
                        puzzle,
                        start: puzzle.start.toUpperCase(),
                        end: puzzle.end.toUpperCase(),
                        pathLength,
                        solutionCount,
                        reason: pathLength === -1
                            ? 'NO PATH EXISTS (completely unsolvable)'
                            : solutionCount === 0
                            ? `No ${requiredSteps}-step solutions (shortest: ${pathLength})`
                            : `Wrong difficulty (shortest: ${pathLength}, need: ${requiredSteps})`
                    });

                    if (pathLength === -1) {
                        console.error(
                            `🗑️ Puzzle ${index} DISCARDED:`,
                            `${puzzle.start.toUpperCase()} → ${puzzle.end.toUpperCase()}`,
                            `- NO PATH EXISTS (completely unsolvable)`
                        );
                    } else if (solutionCount === 0) {
                        console.error(
                            `🗑️ Puzzle ${index} DISCARDED:`,
                            `${puzzle.start.toUpperCase()} → ${puzzle.end.toUpperCase()}`,
                            `- No ${requiredSteps}-step solutions (shortest: ${pathLength} steps)`
                        );
                    } else {
                        console.warn(
                            `🗑️ Puzzle ${index} DISCARDED:`,
                            `${puzzle.start.toUpperCase()} → ${puzzle.end.toUpperCase()}`,
                            `- Wrong difficulty (shortest: ${pathLength}, need: ${requiredSteps})`
                        );
                    }
                }
            });

            console.log('━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━');

            // REPLACE DAILY_PUZZLES with ONLY valid puzzles
            DAILY_PUZZLES.length = 0; // Clear original array
            DAILY_PUZZLES.push(...validPuzzles); // Replace with valid ones

            if (invalidPuzzles.length === 0) {
                console.log(`✅ SUCCESS: All ${originalCount} puzzles are valid`);
                console.log(`✅ ${DAILY_PUZZLES.length} solvable puzzles loaded into game`);
            } else {
                console.warn(`🗑️ FILTERED OUT: ${invalidPuzzles.length} invalid puzzles discarded`);
                console.log(`✅ KEPT: ${validPuzzles.length} valid puzzles loaded into game`);

                // Show summary of what was thrown away
                console.group('🗑️ Discarded Puzzles (thrown in trash):');
                invalidPuzzles.forEach(inv => {
                    console.warn(`   ${inv.start} → ${inv.end}: ${inv.reason}`);
                });
                console.groupEnd();

                console.log('');
                console.log('✅ GUARANTEE: Every daily puzzle is now 100% solvable');
                console.log(`   Players will only see the ${DAILY_PUZZLES.length} valid puzzles`);
            }

            return DAILY_PUZZLES.length; // Return count of valid puzzles
        }


        // Update dots display
        function updateAttemptsDisplay() {
            const dotsUsed = 3 - attemptsRemaining;

            // Determine color based on remaining attempts
            let colorClass = 'green';
            if (attemptsRemaining === 2) {
                colorClass = 'yellow';
            } else if (attemptsRemaining === 1) {
                colorClass = 'red';
            }

            for (let i = 1; i <= 3; i++) {
                const dot = document.getElementById(`dot${i}`);

                // Remove all color classes
                dot.classList.remove('green', 'yellow', 'red', 'used');

                if (i <= dotsUsed) {
                    // Dot is used - fade it out
                    dot.classList.add('used');
                } else {
                    // Dot is active - apply color based on urgency
                    dot.classList.add(colorClass);
                }
            }
        }

        // Initialize game
        function initGame() {
            currentPuzzle = getTodaysPuzzle();

            // Safety check: Ensure we got a valid puzzle
            if (!currentPuzzle) {
                console.error('❌ FATAL: Cannot initialize game - no puzzle available');
                alert('Error: No puzzle available. Please refresh the page.');
                return;
            }

            document.getElementById('start-word').textContent = currentPuzzle.start.toUpperCase();
            document.getElementById('end-word').textContent = currentPuzzle.end.toUpperCase();

            // Calculate all possible solutions
            console.log(`\n🎮 Today's puzzle: ${currentPuzzle.start.toUpperCase()} → ${currentPuzzle.end.toUpperCase()}`);
            console.log(`Calculating all possible solutions...`);
            currentPuzzleSolutions = findAllPaths(currentPuzzle.start, currentPuzzle.end);
            console.log(`✅ Found ${currentPuzzleSolutions.length} possible solution(s)\n`);

            // Reset final solve time
            finalSolveTime = null;

            // Reset game state
            gameState = GameState.IDLE;
            finalSolveSeconds = null;
            gameStartTime = null;
            puzzleSolved = false;
            lastSolvedSolution = null;

            // Clear timer interval
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }

            // Reset timer toggle display
            timerVisible = false;
            const timerToggle = document.getElementById('timer-toggle');
            if (timerToggle) {
                timerToggle.textContent = 'Show Timer';
            }

            // Reset inputs
            document.getElementById('word1').value = '';
            document.getElementById('word2').value = '';
            document.getElementById('word3').value = '';

            // Remove hint and highlight classes
            document.querySelectorAll('.word-input').forEach(input => {
                input.classList.remove('has-hint');
                input.classList.remove('highlight-green');
                input.classList.remove('correct');
            });
            document.querySelectorAll('.word-box').forEach(box => {
                box.classList.remove('highlight-green');
            });

            attemptsRemaining = 3;
            gameOver = false;
            puzzleSolved = false;  // Reset solved state for new game
            lastSolvedSolution = null;  // Clear last solution

            // Re-enable inputs for new game
            enableInputs();

            // Update button visibility (See Results → Check Path)
            updateButtonVisibility();

            updateAttemptsDisplay();
            const messageEl = document.getElementById('message');
            messageEl.textContent = '';
            messageEl.className = 'message';
            document.getElementById('check-btn').disabled = false;

            // Auto-uppercase inputs
            document.querySelectorAll('.word-input').forEach(input => {
                input.addEventListener('input', (e) => {
                    e.target.value = e.target.value.toUpperCase();
                });
            });
        }

        // Show message
        function showMessage(text, type) {
            const messageEl = document.getElementById('message');
            messageEl.textContent = text;
            messageEl.className = 'message ' + type;
        }

        // Animate shake
        function shakeInputs() {
            const inputs = document.querySelectorAll('.word-input');
            inputs.forEach(input => {
                input.classList.add('shake');
                setTimeout(() => input.classList.remove('shake'), 500);
            });
        }

        // Animate highlight one by one from top to bottom
        function glowPath() {
            // Get elements in order: start word, word1, word2, word3, end word
            const startWord = document.getElementById('start-word');
            const word1 = document.getElementById('word1');
            const word2 = document.getElementById('word2');
            const word3 = document.getElementById('word3');
            const endWord = document.getElementById('end-word');

            const boxes = [startWord, word1, word2, word3, endWord];

            // Light up each box one at a time with delay
            boxes.forEach((box, index) => {
                setTimeout(() => {
                    box.classList.add('highlight-green');
                }, index * 200); // 200ms delay between each box
            });
        }

        // Check the path
        function checkPath() {
            if (gameOver) {
                return;
            }

            // Prevent any action if puzzle has been solved
            if (puzzleSolved) {
                return;
            }

            // Track check path clicked event
            if (typeof plausible !== 'undefined') {
                plausible('check_path_clicked');
            }

            const input1 = document.getElementById('word1');
            const input2 = document.getElementById('word2');
            const input3 = document.getElementById('word3');

            const word1 = input1.value.toLowerCase();
            const word2 = input2.value.toLowerCase();
            const word3 = input3.value.toLowerCase();

            const inputs = [input1, input2, input3];
            const words = [word1, word2, word3];

            // Input validation - check all three words are filled
            // This MUST happen before any attempt consumption
            const allFilled = words.every(word => word && word.length === 4);

            if (!allFilled) {
                // Show friendly feedback without consuming an attempt
                showMessage('Please fill in all three words before checking your path.', 'info');
                shakeInputs();
                return;  // Early return - NO penalty for incomplete input
            }

            // Clear all correct markings first
            inputs.forEach(input => input.classList.remove('correct'));

            // Build the full chain
            const fullChain = [currentPuzzle.start, word1, word2, word3, currentPuzzle.end];

            let errorMessage = '';
            let failedAtStep = -1;
            let isChainValid = true;

            // Check for duplicate words in the path
            const usedWords = new Set([currentPuzzle.start.toLowerCase(), currentPuzzle.end.toLowerCase()]);

            // Validate each step in the chain
            for (let i = 0; i < 3; i++) {
                const userWord = words[i];
                const prevWord = fullChain[i];

                // Check if word is valid English word
                if (!VALID_WORDS.has(userWord)) {
                    errorMessage = `"${userWord.toUpperCase()}" is not a valid word`;
                    isChainValid = false;
                    failedAtStep = i;
                    break;
                }

                // Check for duplicate words in the path
                if (usedWords.has(userWord)) {
                    errorMessage = `"${userWord.toUpperCase()}" has already been used in this path`;
                    isChainValid = false;
                    failedAtStep = i;
                    break;
                }
                usedWords.add(userWord);

                // Check if word differs by exactly one letter from previous
                if (!oneLetterDiff(prevWord, userWord)) {
                    errorMessage = 'Each word must change exactly one letter from the previous word';
                    isChainValid = false;
                    failedAtStep = i;
                    break;
                }
            }

            // If chain is valid so far, check if it can reach the end word
            if (isChainValid && word1 && word2 && word3) {
                // Check if word3 connects to end word
                if (!oneLetterDiff(word3, currentPuzzle.end)) {
                    errorMessage = 'The final word must change exactly one letter to reach the end';
                    isChainValid = false;
                }
            }

            // If there was an error, consume an attempt
            if (!isChainValid) {
                attemptsRemaining--;
                updateAttemptsDisplay();
                shakeInputs();
                showMessage(errorMessage, 'error');
                checkGameOver();
                return;
            }

            // ✅ RULE-BASED VALIDATION: Accept ANY valid path
            // A path is valid if it follows all the rules (checked above)
            const userSolution = [word1, word2, word3];

            // Check if puzzle is already solved (can't submit twice)
            if (puzzleSolved) {
                showMessage('You already solved this puzzle!', 'error');
                checkGameOver();
                return;
            }

            // ✅ SUCCESS! The path is valid and follows all rules
            showMessage('Perfect! You solved it!', 'success');

            // Remove any existing correct/highlight classes before animation
            document.querySelectorAll('.word-input, .word-box').forEach(el => {
                el.classList.remove('correct');
                el.classList.remove('highlight-green');
            });

            // Start the sequential green animation
            glowPath();

            // Show success screen after animation completes
            setTimeout(() => {
                showSuccessScreen(userSolution);
            }, 1500);
        }

        // Check if game over
        function checkGameOver() {
            if (attemptsRemaining <= 0) {
                gameOver = true;
                document.getElementById('check-btn').disabled = true;
                setTimeout(showGameOverScreen, 1000);
            }
        }

        // Show game over screen
        function showGameOverScreen() {
            // Show one valid solution
            let solutionsHTML = `<div style="text-align: center; padding: 20px;">`;
            solutionsHTML += `<div style="font-size: 1.1rem; margin-bottom: 20px; opacity: 0.8;">Out of attempts! The puzzle resets tomorrow.</div>`;

            if (currentPuzzleSolutions.length > 0) {
                solutionsHTML += `<div style="font-size: 0.9rem; color: #666; margin-bottom: 15px;">Here's a valid solution:</div>`;

                const solution = currentPuzzleSolutions[0]; // Show first valid solution
                solutionsHTML += `<div style="display: flex; flex-direction: column; align-items: center; gap: 8px;">`;

                // Start word
                solutionsHTML += `<div style="background: #f5f5f5; border: 2px solid #000; border-radius: 10px; padding: 12px 20px; font-size: 1.2rem; font-weight: 700; letter-spacing: 2px; box-shadow: 0 2px 0 #000; min-width: 120px; text-align: center;">${currentPuzzle.start.toUpperCase()}</div>`;

                // Intermediary words
                solution.forEach(word => {
                    solutionsHTML += `<div style="background: #fff; border: 2px solid #000; border-radius: 10px; padding: 12px 20px; font-size: 1.2rem; font-weight: 700; letter-spacing: 2px; box-shadow: 0 2px 0 #000; min-width: 120px; text-align: center;">${word.toUpperCase()}</div>`;
                });

                // End word
                solutionsHTML += `<div style="background: #f5f5f5; border: 2px solid #000; border-radius: 10px; padding: 12px 20px; font-size: 1.2rem; font-weight: 700; letter-spacing: 2px; box-shadow: 0 2px 0 #000; min-width: 120px; text-align: center;">${currentPuzzle.end.toUpperCase()}</div>`;

                solutionsHTML += `</div>`;
            }

            solutionsHTML += `</div>`;

            document.getElementById('solution-path').innerHTML = solutionsHTML;
            document.getElementById('game-over-screen').style.display = 'flex';
        }

        // Show success screen
        function showSuccessScreen(userSolution) {
            const word1 = userSolution[0];
            const word2 = userSolution[1];
            const word3 = userSolution[2];

            // Calculate and store solve time
            if (gameStartTime && gameState !== GameState.SOLVED) {
                // FREEZE TIME - Single source of truth
                const elapsedSeconds = Math.floor((Date.now() - gameStartTime) / 1000);
                finalSolveSeconds = elapsedSeconds;  // Store in seconds (immutable)
                finalSolveTime = formatTimeHumanReadable(elapsedSeconds);  // Store human-readable

                // Update game state to SOLVED (permanent)
                gameState = GameState.SOLVED;

                // Update player statistics
                updateStatsOnWin();

                // Mark puzzle as solved to lock game state
                puzzleSolved = true;

                // Track puzzle solved event (only fires once)
                if (typeof plausible !== 'undefined') {
                    plausible('puzzle_solved');
                }

                // Store the solution for reopening
                lastSolvedSolution = userSolution;

                // Disable inputs to prevent further edits
                disableInputs();

                // Update button visibility (Check Path → See Results)
                updateButtonVisibility();

                // STOP TIMER PERMANENTLY
                if (timerInterval) {
                    clearInterval(timerInterval);
                    timerInterval = null;
                }
            }

            // Update title and subtitle
            document.getElementById('success-title').textContent = 'Excellent!';
            document.getElementById('success-subtitle').textContent = '';

            // Build solution path as vertical boxes (matching game layout)
            let messageHTML = `<div style="text-align: center;">`;

            // Congrats message
            messageHTML += `<div style="font-size: 1.1rem; font-weight: 600; color: #333; margin-bottom: 15px;">Congrats! You solved it!</div>`;

            // Vertical word boxes
            messageHTML += `<div style="display: flex; flex-direction: column; align-items: center; gap: 6px; margin: 15px 0;">`;

            // Start word (gray background)
            messageHTML += `<div style="background: #f5f5f5; border: 2px solid #000; border-radius: 10px; padding: 12px 20px; font-size: 1.2rem; font-weight: 700; letter-spacing: 2px; box-shadow: 0 2px 0 #000; min-width: 120px; text-align: center;">${currentPuzzle.start.toUpperCase()}</div>`;

            // Word 1 (white background)
            messageHTML += `<div style="background: #fff; border: 2px solid #000; border-radius: 10px; padding: 12px 20px; font-size: 1.2rem; font-weight: 700; letter-spacing: 2px; box-shadow: 0 2px 0 #000; min-width: 120px; text-align: center;">${word1.toUpperCase()}</div>`;

            // Word 2 (white background)
            messageHTML += `<div style="background: #fff; border: 2px solid #000; border-radius: 10px; padding: 12px 20px; font-size: 1.2rem; font-weight: 700; letter-spacing: 2px; box-shadow: 0 2px 0 #000; min-width: 120px; text-align: center;">${word2.toUpperCase()}</div>`;

            // Word 3 (white background)
            messageHTML += `<div style="background: #fff; border: 2px solid #000; border-radius: 10px; padding: 12px 20px; font-size: 1.2rem; font-weight: 700; letter-spacing: 2px; box-shadow: 0 2px 0 #000; min-width: 120px; text-align: center;">${word3.toUpperCase()}</div>`;

            // End word (gray background)
            messageHTML += `<div style="background: #f5f5f5; border: 2px solid #000; border-radius: 10px; padding: 12px 20px; font-size: 1.2rem; font-weight: 700; letter-spacing: 2px; box-shadow: 0 2px 0 #000; min-width: 120px; text-align: center;">${currentPuzzle.end.toUpperCase()}</div>`;

            messageHTML += `</div>`;

            // Show player statistics
            const stats = getPlayerStats();
            const winPercentage = calculateWinPercentage(stats);
            const elapsedSeconds = getElapsedSeconds();
            const timeDisplay = formatTimeMMSS(elapsedSeconds);

            messageHTML += `<div class="player-stats">`;

            // Games Played
            messageHTML += `<div class="stat-box">`;
            messageHTML += `<div class="stat-number">${stats.gamesPlayed}</div>`;
            messageHTML += `<div class="stat-label">Played</div>`;
            messageHTML += `</div>`;

            // Win Percentage
            messageHTML += `<div class="stat-box">`;
            messageHTML += `<div class="stat-number">${winPercentage}%</div>`;
            messageHTML += `<div class="stat-label">Win %</div>`;
            messageHTML += `</div>`;

            // Time (today's puzzle)
            messageHTML += `<div class="stat-box">`;
            messageHTML += `<div class="stat-number">${timeDisplay}</div>`;
            messageHTML += `<div class="stat-label">Time</div>`;
            messageHTML += `</div>`;

            messageHTML += `</div>`;

            messageHTML += `<div style="margin-top: 20px; font-size: 0.95rem; opacity: 0.8;">`;
            messageHTML += `Come back tomorrow for a new puzzle!`;
            messageHTML += `</div>`;
            messageHTML += `</div>`;

            document.getElementById('success-path').innerHTML = messageHTML;

            // Show Return to Game button
            const returnFromSuccessBtn = document.getElementById('return-from-success-btn');
            if (returnFromSuccessBtn) returnFromSuccessBtn.style.display = 'block';

            document.getElementById('success-screen').style.display = 'flex';

            // Trigger confetti animation
            const duration = 3000;
            const end = Date.now() + duration;

            const colors = ['#22c55e', '#fbbf24', '#3b82f6', '#a855f7', '#ef4444'];

            (function frame() {
                confetti({
                    particleCount: 5,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 },
                    colors: colors
                });
                confetti({
                    particleCount: 5,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 },
                    colors: colors
                });

                if (Date.now() < end) {
                    requestAnimationFrame(frame);
                }
            }());
        }

        // Countdown timer to 12am ET
        function updateCountdown() {
            const now = new Date();

            // Get ET time components
            const etFormatter = new Intl.DateTimeFormat('en-US', {
                timeZone: 'America/New_York',
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            });

            const parts = etFormatter.formatToParts(now);
            const etParts = {};
            parts.forEach(part => {
                if (part.type !== 'literal') {
                    etParts[part.type] = parseInt(part.value);
                }
            });

            // Create Date object for current ET time
            const etNow = new Date(etParts.year, etParts.month - 1, etParts.day, etParts.hour, etParts.minute, etParts.second);

            // Create Date object for next midnight ET
            const etMidnight = new Date(etParts.year, etParts.month - 1, etParts.day + 1, 0, 0, 0);

            const diff = etMidnight - etNow;

            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            const timerEl = document.getElementById('countdown-timer');
            if (timerEl) {
                timerEl.textContent = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            }
        }

        // Event listeners
        document.getElementById('check-btn').addEventListener('click', checkPath);

        // See Results button handler (shows success screen again after puzzle is solved)
        document.getElementById('see-results-btn').addEventListener('click', reopenSuccessScreen);

        // Return to Game button handler
        document.getElementById('return-from-success-btn').addEventListener('click', () => {
            // Track return to game clicked event
            if (typeof plausible !== 'undefined') {
                plausible('return_to_game_clicked');
            }

            // Hide success screen
            document.getElementById('success-screen').style.display = 'none';

            // Show the solved solution
            if (lastSolvedSolution) {
                document.getElementById('word1').value = lastSolvedSolution[0].toUpperCase();
                document.getElementById('word2').value = lastSolvedSolution[1].toUpperCase();
                document.getElementById('word3').value = lastSolvedSolution[2].toUpperCase();
            }
        });

        // Generate share text with exact format
        function generateShareText(timeString) {
            return `I solved today's Word Hop in ${timeString}.
Can you beat my time?

https://playwordhop.com`;
        }

        // Share button handler
        document.getElementById('share-btn').addEventListener('click', () => {
            // Track share clicked event
            if (typeof plausible !== 'undefined') {
                plausible('share_clicked');
            }

            // Use finalSolveTime if available, otherwise calculate current time in human-readable format
            let timeString;
            if (finalSolveTime) {
                timeString = finalSolveTime;
            } else {
                const elapsedSeconds = gameStartTime ? Math.floor((Date.now() - gameStartTime) / 1000) : 0;
                timeString = formatTimeHumanReadable(elapsedSeconds);
            }

            // Generate dynamic share text
            const shareText = generateShareText(timeString);

            // Try Web Share API first (mobile), fallback to clipboard
            if (navigator.share) {
                navigator.share({
                    text: shareText
                }).catch(err => {
                    // User cancelled share, do nothing
                    console.log('Share cancelled');
                });
            } else {
                // Fallback: Copy to clipboard
                navigator.clipboard.writeText(shareText).then(() => {
                    // Show temporary feedback
                    const originalText = document.getElementById('share-btn').textContent;
                    document.getElementById('share-btn').textContent = 'Copied!';
                    setTimeout(() => {
                        document.getElementById('share-btn').textContent = originalText;
                    }, 2000);
                }).catch(err => {
                    console.error('Failed to copy:', err);
                    alert('Failed to copy to clipboard');
                });
            }
        });

        document.getElementById('return-from-gameover-btn').addEventListener('click', () => {
            // Hide game over screen
            document.getElementById('game-over-screen').style.display = 'none';

            // Show the solved solution (if any)
            if (lastSolvedSolution) {
                document.getElementById('word1').value = lastSolvedSolution[0].toUpperCase();
                document.getElementById('word2').value = lastSolvedSolution[1].toUpperCase();
                document.getElementById('word3').value = lastSolvedSolution[2].toUpperCase();
            }
        });

        // Allow Enter key to submit
        document.querySelectorAll('.word-input').forEach(input => {
            input.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    checkPath();
                }
            });
        });

        // Landing page functionality
        function setupLandingPage() {
            const landingPage = document.getElementById('landing-page');
            const playBtn = document.getElementById('play-btn-landing');
            const landingDate = document.getElementById('landing-date');
            const landingPuzzleNumber = document.getElementById('landing-puzzle-number');

            // Get current date in ET timezone for both puzzle number and date display
            const now = new Date();
            const etDateString = now.toLocaleDateString("en-US", {
                timeZone: "America/New_York",
                year: 'numeric',
                month: '2-digit',
                day: '2-digit'
            });

            // Parse the ET date (format: MM/DD/YYYY)
            const [etMonth, etDay, etYear] = etDateString.split('/');
            const currentETDate = new Date(etYear, etMonth - 1, etDay);

            // Calculate puzzle number (December 8, 2025 is Puzzle #1)
            const firstPuzzleDate = new Date(2025, 11, 8); // December 8, 2025 (month is 0-indexed)
            const daysSinceFirstPuzzle = Math.floor((currentETDate - firstPuzzleDate) / (1000 * 60 * 60 * 24));
            const puzzleNumber = daysSinceFirstPuzzle + 1;

            // Update puzzle number display
            landingPuzzleNumber.textContent = `Daily Puzzle #${puzzleNumber}`;

            // Update footer puzzle number
            const footerPuzzleNumber = document.getElementById('footer-puzzle-number');
            if (footerPuzzleNumber) {
                footerPuzzleNumber.textContent = `Daily Puzzle #${puzzleNumber}`;
            }

            // Set date display with ET timezone
            const etDateFormatted = now.toLocaleDateString('en-US', {
                timeZone: 'America/New_York',
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            landingDate.textContent = etDateFormatted;

            // Hide landing page when play is clicked
            playBtn.addEventListener('click', () => {
                gameStartTime = Date.now();  // Start timing
                gameState = GameState.PLAYING;  // Set state to playing

                // Track game start event
                if (typeof plausible !== 'undefined') {
                    plausible('game_start');
                }

                // Start timer update interval
                if (timerInterval) {
                    clearInterval(timerInterval);
                }
                timerInterval = setInterval(updateTimer, 1000);

                landingPage.classList.add('hidden');

                // Show tutorial after landing page
                showTutorialIfNeeded();
            });
        }

        // Tutorial functionality
        let tutorialAnimationTimeouts = [];
        let tutorialAnimationRunning = false;

        function resetTutorialAnimation() {
            // Clear all pending timeouts
            tutorialAnimationTimeouts.forEach(timeout => clearTimeout(timeout));
            tutorialAnimationTimeouts = [];
            tutorialAnimationRunning = false;

            // Reset all demo elements to initial state
            const input1 = document.getElementById('demo-input-1');
            const input2 = document.getElementById('demo-input-2');
            const input3 = document.getElementById('demo-input-3');
            const highlight1 = document.getElementById('demo-highlight-1');
            const highlight2 = document.getElementById('demo-highlight-2');
            const highlight3 = document.getElementById('demo-highlight-3');
            const endWord = document.getElementById('demo-end-word');
            const highlightEnd = document.getElementById('demo-highlight-end');

            if (input1) {
                input1.value = '';
                input1.classList.remove('typing');
            }
            if (input2) {
                input2.value = '';
                input2.classList.remove('typing');
            }
            if (input3) {
                input3.value = '';
                input3.classList.remove('typing');
            }
            if (highlight1) highlight1.style.display = 'none';
            if (highlight2) highlight2.style.display = 'none';
            if (highlight3) highlight3.style.display = 'none';
            if (highlightEnd) highlightEnd.style.display = 'none';
            if (endWord) endWord.style.opacity = '1';

            // Remove green classes
            document.querySelectorAll('.demo-box').forEach(box => {
                box.classList.remove('demo-green');
            });
        }

        function animateTutorialDemo(shouldLoop = false) {
            // Reset any existing animation
            resetTutorialAnimation();
            tutorialAnimationRunning = true;

            const input1 = document.getElementById('demo-input-1');
            const input2 = document.getElementById('demo-input-2');
            const input3 = document.getElementById('demo-input-3');
            const highlight1 = document.getElementById('demo-highlight-1');
            const highlight2 = document.getElementById('demo-highlight-2');
            const highlight3 = document.getElementById('demo-highlight-3');
            const endWord = document.getElementById('demo-end-word');
            const highlightEnd = document.getElementById('demo-highlight-end');

            // Animation sequence: COLD → CORD → CARD → WARD → WARM
            const sequence = [
                // Type CORD in box 1
                { delay: 600, action: () => {
                    input1.classList.add('typing');
                    input1.value = 'C';
                }},
                { delay: 750, action: () => { input1.value = 'CO'; }},
                { delay: 900, action: () => { input1.value = 'COR'; }},
                { delay: 1050, action: () => {
                    input1.value = 'CORD';
                    input1.classList.remove('typing');
                }},
                // Highlight R in CORD and keep it visible
                { delay: 1500, action: () => {
                    input1.value = '';
                    highlight1.innerHTML = 'CO<span class="demo-letter-highlight">R</span>D';
                    highlight1.style.display = 'block';
                }},

                // Type CARD in box 2 (R stays highlighted in box 1)
                { delay: 2500, action: () => {
                    input2.classList.add('typing');
                    input2.value = 'C';
                }},
                { delay: 2650, action: () => { input2.value = 'CA'; }},
                { delay: 2800, action: () => { input2.value = 'CAR'; }},
                { delay: 2950, action: () => {
                    // As soon as CARD is typed, show it with R already highlighted
                    input2.value = '';
                    input2.classList.remove('typing');
                    highlight2.innerHTML = 'CA<span class="demo-letter-highlight">R</span>D';
                    highlight2.style.display = 'block';
                }},
                // Then 0.1s later, highlight A as well
                { delay: 3050, action: () => {
                    highlight2.innerHTML = 'C<span class="demo-letter-highlight">AR</span>D';
                }},

                // Type WARD in box 3 (AR stays highlighted in box 2, R in box 1)
                { delay: 3550, action: () => {
                    input3.classList.add('typing');
                    input3.value = 'W';
                }},
                { delay: 3700, action: () => { input3.value = 'WA'; }},
                { delay: 3850, action: () => { input3.value = 'WAR'; }},
                { delay: 4000, action: () => {
                    // As soon as WARD is typed, show it with AR already highlighted
                    input3.value = '';
                    input3.classList.remove('typing');
                    highlight3.innerHTML = 'W<span class="demo-letter-highlight">AR</span>D';
                    highlight3.style.display = 'block';
                }},
                // Then 0.1s later, highlight W as well
                { delay: 4100, action: () => {
                    highlight3.innerHTML = '<span class="demo-letter-highlight">WAR</span>D';
                }},

                // Fill all boxes green sequentially (like the game)
                { delay: 4500, action: () => {
                    const demoStartBox = document.getElementById('demo-start-box');
                    demoStartBox.classList.add('demo-green');
                }},
                { delay: 4700, action: () => {
                    const demoInput1 = document.getElementById('demo-input-1');
                    demoInput1.classList.add('demo-green');
                }},
                { delay: 4900, action: () => {
                    const demoInput2 = document.getElementById('demo-input-2');
                    demoInput2.classList.add('demo-green');
                }},
                { delay: 5100, action: () => {
                    const demoInput3 = document.getElementById('demo-input-3');
                    demoInput3.classList.add('demo-green');
                }},
                { delay: 5300, action: () => {
                    const demoEndBox = document.getElementById('demo-end-box');
                    demoEndBox.classList.add('demo-green');

                    // Trigger confetti from top of tutorial box
                    if (typeof confetti !== 'undefined') {
                        const tutorialContent = document.querySelector('.tutorial-content');
                        const rect = tutorialContent.getBoundingClientRect();
                        const topY = rect.top / window.innerHeight;
                        const centerX = (rect.left + rect.width / 2) / window.innerWidth;

                        // Confetti falling from top
                        confetti({
                            particleCount: 100,
                            angle: 90,
                            spread: 90,
                            origin: { x: centerX, y: topY },
                            startVelocity: 30,
                            gravity: 1.5,
                            scalar: 0.8
                        });

                        // Stop confetti after 0.2 seconds
                        setTimeout(() => {
                            confetti.reset();
                        }, 200);
                    }
                }},

                // Reset for loop
                { delay: 7000, action: () => {
                    input1.value = '';
                    input2.value = '';
                    input3.value = '';
                    highlight1.style.display = 'none';
                    highlight2.style.display = 'none';
                    highlight3.style.display = 'none';
                    highlightEnd.style.display = 'none';
                    endWord.style.opacity = '1';

                    // Remove green classes
                    document.querySelectorAll('.demo-box').forEach(box => {
                        box.classList.remove('demo-green');
                    });
                }}
            ];

            let currentStep = 0;

            function runSequence() {
                if (!tutorialAnimationRunning) return; // Stop if animation was cancelled

                if (currentStep < sequence.length) {
                    const timeout = setTimeout(() => {
                        if (!tutorialAnimationRunning) return; // Check again before executing
                        sequence[currentStep].action();
                        currentStep++;
                        runSequence();
                    }, sequence[currentStep].delay - (sequence[currentStep - 1]?.delay || 0));
                    tutorialAnimationTimeouts.push(timeout);
                } else if (shouldLoop) {
                    // Loop the animation only if shouldLoop is true (initial tutorial)
                    currentStep = 0;
                    const timeout = setTimeout(runSequence, 1000);
                    tutorialAnimationTimeouts.push(timeout);
                } else {
                    // Animation complete, not looping
                    tutorialAnimationRunning = false;
                }
            }

            runSequence();
        }

        function showTutorialIfNeeded() {
            const tutorialModal = document.getElementById('tutorial-modal');

            // TEMPORARY: Always show tutorial for testing
            // Check if user has seen tutorial
            // const hasSeenTutorial = localStorage.getItem('hasSeenTutorial');

            // if (!hasSeenTutorial) {
                // Show tutorial modal
                tutorialModal.style.display = 'flex';

                // Track tutorial opened event
                if (typeof plausible !== 'undefined') {
                    plausible('tutorial_opened');
                }

                // Start animation (with looping)
                setTimeout(() => animateTutorialDemo(true), 500);

                // Mark as seen
                // localStorage.setItem('hasSeenTutorial', 'true');
            // }
        }

        function setupTutorial() {
            const tutorialModal = document.getElementById('tutorial-modal');
            const tutorialCloseBtn = document.getElementById('tutorial-close-btn');
            const helpBtn = document.getElementById('help-btn');

            // Help button handler
            if (helpBtn) {
                helpBtn.addEventListener('click', () => {
                    tutorialModal.style.display = 'flex';

                    // Track tutorial opened event
                    if (typeof plausible !== 'undefined') {
                        plausible('tutorial_opened');
                    }

                    animateTutorialDemo();
                });
            }

            // Close button handler
            tutorialCloseBtn.addEventListener('click', () => {
                tutorialModal.style.display = 'none';
            });
        }

        // Timer toggle functionality
        function setupTimerToggle() {
            const timerToggle = document.getElementById('timer-toggle');

            if (timerToggle) {
                timerToggle.addEventListener('click', () => {
                    timerVisible = !timerVisible;

                    if (timerVisible) {
                        // Show timer - display frozen time if solved, live time if playing
                        const elapsedSeconds = getElapsedSeconds();
                        timerToggle.textContent = formatTimeMMSS(elapsedSeconds);
                    } else {
                        // Hide timer - show "Show timer" text
                        timerToggle.textContent = 'Show Timer';
                    }
                });
            }
        }

        // Expose validation function globally for developer use in browser console
        window.validatePuzzle = validatePuzzlePair;

        // Initialize on load
        try {
            console.log('🚀 Initializing Word Hop...');

            // CRITICAL: Filter out invalid puzzles - ONLY valid puzzles will be used
            const validPuzzleCount = validateAndFilterPuzzles();

            if (validPuzzleCount === 0) {
                // NO VALID PUZZLES - Cannot start game
                throw new Error('No valid puzzles available after filtering');
            }

            // Proceed with game initialization using ONLY valid puzzles
            console.log(`\n🎮 Starting game with ${validPuzzleCount} validated solvable puzzles\n`);
            setupLandingPage();
            setupTutorial();
            setupTimerToggle();
            initGame();
            updateCountdown();
            setInterval(updateCountdown, 1000); // Update countdown every second

            console.log('✅ Word Hop initialized successfully!\n');

        } catch (error) {
            // FATAL ERROR - Display error screen
            console.error('❌ FATAL ERROR during initialization:', error);
            document.body.innerHTML = `
                <div style="
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: #ff5252;
                    color: white;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    padding: 40px;
                    font-family: Arial, sans-serif;
                    text-align: center;
                ">
                    <h1 style="font-size: 3rem; margin-bottom: 20px;">🚫 ERROR</h1>
                    <h2 style="font-size: 1.5rem; margin-bottom: 20px;">Game Cannot Load</h2>
                    <p style="font-size: 1.2rem; max-width: 800px; line-height: 1.6;">
                        ${error.message || 'An error occurred during initialization'}
                        <br><br>
                        <strong>Check the browser console for details.</strong>
                        <br><br>
                        <button onclick="location.reload()" style="
                            padding: 15px 40px;
                            font-size: 1.1rem;
                            background: white;
                            color: #ff5252;
                            border: none;
                            border-radius: 8px;
                            cursor: pointer;
                            margin-top: 20px;
                        ">Reload Page</button>
                    </p>
                </div>
            `;
        }
    </script>
</body>
</html>